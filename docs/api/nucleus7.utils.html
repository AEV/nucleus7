

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>nucleus7.utils package &mdash; nucleus7 v0.10.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/icon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="nucleus7.third_party package" href="nucleus7.third_party.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> nucleus7
          

          
            
            <img src="../_static/icon.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.10.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Project.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Core.html">Nucleotide and co.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DataHandling.html">Data handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Model.html">Model parts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Coordination.html">Coordination</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Optimization.html">Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../KPI.html">KPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Contribution.html">Contribution</a></li>
</ul>
<p class="caption"><span class="caption-text">API:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="nucleus7.builders.html">nucleus7.builders package</a></li>
<li class="toctree-l1"><a class="reference internal" href="nucleus7.coordinator.html">nucleus7.coordinator package</a></li>
<li class="toctree-l1"><a class="reference internal" href="nucleus7.core.html">nucleus7.core package</a></li>
<li class="toctree-l1"><a class="reference internal" href="nucleus7.data.html">nucleus7.data package</a></li>
<li class="toctree-l1"><a class="reference internal" href="nucleus7.kpi.html">nucleus7.kpi package</a></li>
<li class="toctree-l1"><a class="reference internal" href="nucleus7.model.html">nucleus7.model package</a></li>
<li class="toctree-l1"><a class="reference internal" href="nucleus7.optimization.html">nucleus7.optimization package</a></li>
<li class="toctree-l1"><a class="reference internal" href="nucleus7.test_utils.html">nucleus7.test_utils package</a></li>
<li class="toctree-l1"><a class="reference internal" href="nucleus7.third_party.html">nucleus7.third_party package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">nucleus7.utils package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.cli_utils">nucleus7.utils.cli_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.deprecated">nucleus7.utils.deprecated module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.file_utils">nucleus7.utils.file_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.git_utils">nucleus7.utils.git_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.graph_utils">nucleus7.utils.graph_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.io_utils">nucleus7.utils.io_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.jupyter_utils">nucleus7.utils.jupyter_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.kpi_utils">nucleus7.utils.kpi_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.log_utils">nucleus7.utils.log_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.mlflow_utils">nucleus7.utils.mlflow_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.model_utils">nucleus7.utils.model_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.nest_utils">nucleus7.utils.nest_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.np_utils">nucleus7.utils.np_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.nucleotide_utils">nucleus7.utils.nucleotide_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.numpydoc_utils">nucleus7.utils.numpydoc_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.object_utils">nucleus7.utils.object_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.optimization_utils">nucleus7.utils.optimization_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.project_utils">nucleus7.utils.project_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.run_utils">nucleus7.utils.run_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.tensorrt_utils">nucleus7.utils.tensorrt_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.tf_collections_utils">nucleus7.utils.tf_collections_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.tf_data_utils">nucleus7.utils.tf_data_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.tf_objects_factory">nucleus7.utils.tf_objects_factory module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.tf_ops">nucleus7.utils.tf_ops module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.tf_utils">nucleus7.utils.tf_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.tf_varscopes_utils">nucleus7.utils.tf_varscopes_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.utils">nucleus7.utils.utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.vis_utils">nucleus7.utils.vis_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils.warnings">nucleus7.utils.warnings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nucleus7.utils">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">nucleus7</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>nucleus7.utils package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/nucleus7.utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nucleus7-utils-package">
<h1>nucleus7.utils package<a class="headerlink" href="#nucleus7-utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-nucleus7.utils.cli_utils">
<span id="nucleus7-utils-cli-utils-module"></span><h2>nucleus7.utils.cli_utils module<a class="headerlink" href="#module-nucleus7.utils.cli_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils for CLI</p>
<dl class="function">
<dt id="nucleus7.utils.cli_utils.parse_config">
<code class="sig-prename descclassname">nucleus7.utils.cli_utils.</code><code class="sig-name descname">parse_config</code><span class="sig-paren">(</span><em class="sig-param">parser: argparse.ArgumentParser</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/cli_utils.html#parse_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.cli_utils.parse_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse config using parser</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>parser</strong> – parser</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>config</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>config</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.deprecated">
<span id="nucleus7-utils-deprecated-module"></span><h2>nucleus7.utils.deprecated module<a class="headerlink" href="#module-nucleus7.utils.deprecated" title="Permalink to this headline">¶</a></h2>
<p>Methods to encapsulate deprecations from older versions of nucleus7, primary in
configs</p>
<dl class="function">
<dt id="nucleus7.utils.deprecated.add_value_to_config">
<code class="sig-prename descclassname">nucleus7.utils.deprecated.</code><code class="sig-name descname">add_value_to_config</code><span class="sig-paren">(</span><em class="sig-param">config: dict</em>, <em class="sig-param">key: str</em>, <em class="sig-param">value</em>, <em class="sig-param">level_separator='::'</em>, <em class="sig-param">key_if_not_dict='name'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/deprecated.html#add_value_to_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.deprecated.add_value_to_config" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;p1&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_value_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;a::b::c&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: {&#39;b&#39;: {&#39;c&#39;: 100}}, &#39;p1&#39;: 100, &#39;p2&#39;: 200}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;p1&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_value_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;p1::b::c&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="go">{&#39;p1&#39;: {&#39;b&#39;: {&#39;c&#39;: 100}, &#39;name&#39;: 100}, &#39;p2&#39;: 200}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.deprecated.get_value_from_config">
<code class="sig-prename descclassname">nucleus7.utils.deprecated.</code><code class="sig-name descname">get_value_from_config</code><span class="sig-paren">(</span><em class="sig-param">config: dict</em>, <em class="sig-param">key: str</em>, <em class="sig-param">default=None</em>, <em class="sig-param">level_separator='::'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/deprecated.html#get_value_from_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.deprecated.get_value_from_config" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}},</span> <span class="s1">&#39;p1&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_value_from_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;a::b::c&#39;</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;p1&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_value_from_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;p1&#39;</span><span class="p">)</span>
<span class="go">100</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_value_from_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;a::b&#39;</span><span class="p">,</span> <span class="s1">&#39;default_value&#39;</span><span class="p">)</span>
<span class="go">&#39;default_value&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.deprecated.pop_value_from_config">
<code class="sig-prename descclassname">nucleus7.utils.deprecated.</code><code class="sig-name descname">pop_value_from_config</code><span class="sig-paren">(</span><em class="sig-param">config: dict</em>, <em class="sig-param">key: str</em>, <em class="sig-param">default=None</em>, <em class="sig-param">level_separator='::'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/deprecated.html#pop_value_from_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.deprecated.pop_value_from_config" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}},</span> <span class="s1">&#39;p1&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pop_value_from_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;a::b::c&#39;</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;p1&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pop_value_from_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;p1&#39;</span><span class="p">)</span>
<span class="go">100</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.deprecated.replace_deprecated_parameter">
<code class="sig-prename descclassname">nucleus7.utils.deprecated.</code><code class="sig-name descname">replace_deprecated_parameter</code><span class="sig-paren">(</span><em class="sig-param">deprecated_name</em>, <em class="sig-param">real_name</em>, <em class="sig-param">required=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/deprecated.html#replace_deprecated_parameter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.deprecated.replace_deprecated_parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to use to replace the deprecated parameter inside of method
kwargs and warn about it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deprecated_name</strong> – deprecated parameter name</p></li>
<li><p><strong>real_name</strong> – real parameter name which will be used instead of deprecated_name</p></li>
<li><p><strong>required</strong> – if set, then raise a AssertionError if config doesn’t have real_name
parameter or deprecated_name parameter inside</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>decorated method</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>decorated</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.deprecated.replace_deprecated_parameter_in_config">
<code class="sig-prename descclassname">nucleus7.utils.deprecated.</code><code class="sig-name descname">replace_deprecated_parameter_in_config</code><span class="sig-paren">(</span><em class="sig-param">deprecated_name: str</em>, <em class="sig-param">real_name: str</em>, <em class="sig-param">config: dict</em>, <em class="sig-param">required=True</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/deprecated.html#replace_deprecated_parameter_in_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.deprecated.replace_deprecated_parameter_in_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace deprecated parameter to real parameter name and raise a warning
if the deprecated parameter name exists in the config</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deprecated_name</strong> – deprecated parameter name</p></li>
<li><p><strong>real_name</strong> – real parameter name which will be used instead of deprecated_name</p></li>
<li><p><strong>config</strong> – config</p></li>
<li><p><strong>required</strong> – if set, then raise a AssertionError if config doesn’t have real_name
parameter or deprecated_name parameter inside</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>configuration with replaced deprecated name parameter</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>config_with_replaced_deprecated</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<dl class="simple">
<dt>DeprecationWarning</dt><dd><p>if parameter with deprecated_name exists</p>
</dd>
</dl>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.8)"><strong>AssertionError</strong></a> – if required and value of parameter with deprecated name and real name
    is None</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.8)"><strong>AssertionError</strong></a> – if parameter with both deprecated_name and real_name exists inside of
    config</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.deprecated.warn_deprecated_method">
<code class="sig-prename descclassname">nucleus7.utils.deprecated.</code><code class="sig-name descname">warn_deprecated_method</code><span class="sig-paren">(</span><em class="sig-param">real_name: str = None</em>, <em class="sig-param">additional_instructions: str = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/deprecated.html#warn_deprecated_method"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.deprecated.warn_deprecated_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Warn that the method is deprecated and then execute it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>real_name</strong> – new name of the method</p></li>
<li><p><strong>additional_instructions</strong> – additional instruction to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>decorated method</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>wrapped</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.deprecated.warning_deprecated_config_file">
<code class="sig-prename descclassname">nucleus7.utils.deprecated.</code><code class="sig-name descname">warning_deprecated_config_file</code><span class="sig-paren">(</span><em class="sig-param">deprecated_fname: str</em>, <em class="sig-param">real_fname: str = None</em>, <em class="sig-param">additional_instructions: str = None</em>, <em class="sig-param">value=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/deprecated.html#warning_deprecated_config_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.deprecated.warning_deprecated_config_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise a DeprecationWarning with specified message structure used to point
the deprecated file names</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deprecated_fname</strong> – deprecated file name for the config</p></li>
<li><p><strong>real_fname</strong> – real file name for the config</p></li>
<li><p><strong>additional_instructions</strong> – additional information inside of warning message</p></li>
<li><p><strong>value</strong> – value of the parameter to print inside of warning message</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<dl class="simple">
<dt>DeprecationWarning</dt><dd><p>deprecation warning</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.deprecated.warning_deprecated_config_param">
<code class="sig-prename descclassname">nucleus7.utils.deprecated.</code><code class="sig-name descname">warning_deprecated_config_param</code><span class="sig-paren">(</span><em class="sig-param">deprecated_name: str</em>, <em class="sig-param">real_name: str = None</em>, <em class="sig-param">additional_instructions: str = None</em>, <em class="sig-param">value=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/deprecated.html#warning_deprecated_config_param"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.deprecated.warning_deprecated_config_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise a DeprecationWarning with specified message structure used to point
the deprecated parameter names</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deprecated_name</strong> – deprecated parameter name</p></li>
<li><p><strong>real_name</strong> – real parameter name which will be used instead of deprecated_name</p></li>
<li><p><strong>additional_instructions</strong> – additional information inside of warning message</p></li>
<li><p><strong>value</strong> – value of the parameter to print inside of warning message</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<dl class="simple">
<dt>DeprecationWarning</dt><dd><p>deprecation warning</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.deprecated.warning_deprecated_method">
<code class="sig-prename descclassname">nucleus7.utils.deprecated.</code><code class="sig-name descname">warning_deprecated_method</code><span class="sig-paren">(</span><em class="sig-param">deprecated_name: str</em>, <em class="sig-param">real_name: str = None</em>, <em class="sig-param">additional_instructions: str = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/deprecated.html#warning_deprecated_method"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.deprecated.warning_deprecated_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise a DeprecationWarning with specified message structure used to point
the deprecated parameter method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deprecated_name</strong> – deprecated method name</p></li>
<li><p><strong>real_name</strong> – new method name</p></li>
<li><p><strong>additional_instructions</strong> – additional information inside of warning message</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<dl class="simple">
<dt>DeprecationWarning</dt><dd><p>deprecation warning</p>
</dd>
</dl>
</div>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.file_utils">
<span id="nucleus7-utils-file-utils-module"></span><h2>nucleus7.utils.file_utils module<a class="headerlink" href="#module-nucleus7.utils.file_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to work with files</p>
<dl class="function">
<dt id="nucleus7.utils.file_utils.add_suffix">
<code class="sig-prename descclassname">nucleus7.utils.file_utils.</code><code class="sig-name descname">add_suffix</code><span class="sig-paren">(</span><em class="sig-param">fname: str</em>, <em class="sig-param">suffix: str</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/file_utils.html#add_suffix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.file_utils.add_suffix" title="Permalink to this definition">¶</a></dt>
<dd><p>Add suffix fo filename just before extension</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> – file name to add the suffix</p></li>
<li><p><strong>suffix</strong> – suffix to add</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>file name with suffix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>fname_with_suffix</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add_suffix</span><span class="p">(</span><span class="s1">&#39;file/name.ext&#39;</span><span class="p">,</span> <span class="s1">&#39;_suffix&#39;</span><span class="p">)</span>
<span class="go">&#39;file/name_suffix.ext&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.file_utils.get_basename_with_depth">
<code class="sig-prename descclassname">nucleus7.utils.file_utils.</code><code class="sig-name descname">get_basename_with_depth</code><span class="sig-paren">(</span><em class="sig-param">fname: Union[str, bytes], path_depth: int</em><span class="sig-paren">)</span> &#x2192; Tuple[str, str]<a class="reference internal" href="../_modules/nucleus7/utils/file_utils.html#get_basename_with_depth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.file_utils.get_basename_with_depth" title="Permalink to this definition">¶</a></dt>
<dd><p>Return basename with depth of fname_depth from full file path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> – complete path to file</p></li>
<li><p><strong>path_depth</strong> – how many directories back from the file must be returned</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>basename with subdirectories till depth of path_depth</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>basename_with_subdirectories</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_basename_with_depth</span><span class="p">(</span><span class="s2">&quot;long/path/to/file.txt&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">&quot;&quot;, &quot;file.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_basename_with_depth</span><span class="p">(</span><span class="s2">&quot;long/path/to/file.txt&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">&quot;path/to&quot;, &quot;file.txt&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.file_utils.get_existing_fnames_with_index">
<code class="sig-prename descclassname">nucleus7.utils.file_utils.</code><code class="sig-name descname">get_existing_fnames_with_index</code><span class="sig-paren">(</span><em class="sig-param">basename_without_index: str</em>, <em class="sig-param">path_dir: str</em>, <em class="sig-param">extension: str = ''</em>, <em class="sig-param">separator: str = '-'</em><span class="sig-paren">)</span> &#x2192; List[str]<a class="reference internal" href="../_modules/nucleus7/utils/file_utils.html#get_existing_fnames_with_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.file_utils.get_existing_fnames_with_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the file names with index, e.g. all file names with {path}-{index}
format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>basename_without_index</strong> – base name without index</p></li>
<li><p><strong>extension</strong> – file extension</p></li>
<li><p><strong>path_dir</strong> – path to the directory where to search</p></li>
<li><p><strong>separator</strong> – separator for the index</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>existing file names sorted in index order</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>existing_file_names</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.file_utils.get_incremented_path">
<code class="sig-prename descclassname">nucleus7.utils.file_utils.</code><code class="sig-name descname">get_incremented_path</code><span class="sig-paren">(</span><em class="sig-param">path: str</em>, <em class="sig-param">add_index: bool = False</em>, <em class="sig-param">separator: str = '-'</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/file_utils.html#get_incremented_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.file_utils.get_incremented_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the path to a filename which does not exist by incrementing path.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_incremented_path</span><span class="p">(</span><span class="s1">&#39;/etc/issue&#39;</span><span class="p">)</span>
<span class="go">&#39;/etc/issue-1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_incremented_path</span><span class="p">(</span><span class="s1">&#39;whatever/1337bla.py&#39;</span><span class="p">)</span>
<span class="go">&#39;whatever/1337bla.py&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.file_utils.get_subdirs">
<code class="sig-prename descclassname">nucleus7.utils.file_utils.</code><code class="sig-name descname">get_subdirs</code><span class="sig-paren">(</span><em class="sig-param">root_dir: str</em><span class="sig-paren">)</span> &#x2192; list<a class="reference internal" href="../_modules/nucleus7/utils/file_utils.html#get_subdirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.file_utils.get_subdirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all subdirectories inside of root_dir</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>root_dir</strong> – name of root directory to search for subdirectories</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>subdirectories</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>subdirectories</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.file_utils.match_file_names">
<code class="sig-prename descclassname">nucleus7.utils.file_utils.</code><code class="sig-name descname">match_file_names</code><span class="sig-paren">(</span><em class="sig-param">file_names: Union[list, dict], suffixes: Optional[dict] = None, basename_fn: Union[Callable, dict] = None</em><span class="sig-paren">)</span> &#x2192; Tuple[dict, dict]<a class="reference internal" href="../_modules/nucleus7/utils/file_utils.html#match_file_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.file_utils.match_file_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Arrange file names for all keys from file_list and return them in sorted
order together with data, which keys are provided for each sample</p>
<p>If one file from file pairs not exist, it will be skipped.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">file_list</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;image1&#39;</span><span class="p">,</span> <span class="s1">&#39;image2&#39;</span><span class="p">],</span>
<span class="go">                 &#39;labels&#39;: [&#39;image1_label&#39;, &#39;image3_label&#39;]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_list_reassigned</span><span class="p">,</span> <span class="n">keys_for_fnames</span> <span class="o">=</span> <span class="n">match_file_names</span><span class="p">(</span><span class="n">file_list</span><span class="p">)</span>
<span class="go">file_list_reassigned = {&#39;image&#39;: &#39;[image1&#39;], &#39;labels&#39;: [image1_label]}</span>
<span class="go">keys_for_fnames = {&#39;image&#39;: [1],</span>
<span class="go">                   &#39;labels&#39;: [1]}</span>
</pre></div>
</div>
<p>Also if file_list is list of subsets and each subset can have
different keys. In that case it will be resolved as follows</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">file_list</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;image1&#39;</span><span class="p">,</span> <span class="s1">&#39;image2&#39;</span><span class="p">],</span>
<span class="go">                 &#39;labels&#39;: [&#39;image1_label&#39;, &#39;image3_label&#39;]},</span>
<span class="go">                 {&#39;image&#39;: [&#39;image10&#39;, &#39;image20&#39;],</span>
<span class="go">                 &#39;labels2&#39;: [&#39;image10_label&#39;, &#39;image20_label&#39;]}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_list_reassigned</span><span class="p">,</span> <span class="n">keys_for_fnames</span> <span class="o">=</span> <span class="n">match_file_names</span><span class="p">(</span><span class="n">file_list</span><span class="p">)</span>
<span class="go">file_list_reassigned = {&#39;image&#39;: [&#39;image1&#39;, &#39;image10&#39;, &#39;image20&#39;],</span>
<span class="go">                        &#39;labels&#39;: [&#39;image1_label&#39;, &#39;&#39;, &#39;&#39;],</span>
<span class="go">                        &#39;labels2&#39;: [&#39;&#39;, &#39;image10_label&#39;, &#39;image20_label&#39;]}</span>
<span class="go">keys_for_fnames = {&#39;image&#39;: [1, 1, 1],</span>
<span class="go">                   &#39;labels&#39;: [1, 0, 0],</span>
<span class="go">                   &#39;labels2&#39;: [0, 1, 1]}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_names</strong> – dict with glob expressions or file names corresponding to each key;
corresponding files for should have same base names except of
file_suffixes[key], e.g. {base_name}{fname_suffix}{.ext}</p></li>
<li><p><strong>suffixes</strong> – dict of suffixes that will be extracted from fname to match them;
can have same keys as file_list</p></li>
<li><p><strong>basename_fn</strong> – function to get the matching base name from file name itself; if not
defined, only base names with suffix will be matched; if is a dict,
should have same</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>file_list_reassigned</em> – reassigned dict with same keys as file_list but with corresponding
files is same order</p></li>
<li><p><em>keys_for_fnames</em> – dict of lists with all possible keys from file_list and 1’s if that
sample has corresponding file name and key and 0’s otherwise; this
can be used e.g. for masking of losses</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.file_utils.match_file_names_with_glob">
<code class="sig-prename descclassname">nucleus7.utils.file_utils.</code><code class="sig-name descname">match_file_names_with_glob</code><span class="sig-paren">(</span><em class="sig-param">file_names_with_glob: Dict[str, str], match_fn: Callable[[str, str], str]</em><span class="sig-paren">)</span> &#x2192; Dict[str, List[str]]<a class="reference internal" href="../_modules/nucleus7/utils/file_utils.html#match_file_names_with_glob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.file_utils.match_file_names_with_glob" title="Permalink to this definition">¶</a></dt>
<dd><p>Match</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_names_with_glob</strong> – </p></li>
<li><p><strong>match_fn</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.file_utils.maybe_fnames_from_glob">
<code class="sig-prename descclassname">nucleus7.utils.file_utils.</code><code class="sig-name descname">maybe_fnames_from_glob</code><span class="sig-paren">(</span><em class="sig-param">fnames: Union[str, list]</em><span class="sig-paren">)</span> &#x2192; list<a class="reference internal" href="../_modules/nucleus7/utils/file_utils.html#maybe_fnames_from_glob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.file_utils.maybe_fnames_from_glob" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore the file names from glob pattern if needed</p>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.file_utils.remove_prefix">
<code class="sig-prename descclassname">nucleus7.utils.file_utils.</code><code class="sig-name descname">remove_prefix</code><span class="sig-paren">(</span><em class="sig-param">path: str, prefix: Optional[str]</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/file_utils.html#remove_prefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.file_utils.remove_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the prefix from the file path if file name starts with it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – path with prefix</p></li>
<li><p><strong>prefix</strong> – prefix to remove</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>name with removed prefix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>name_without_prefix</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.file_utils.remove_suffix">
<code class="sig-prename descclassname">nucleus7.utils.file_utils.</code><code class="sig-name descname">remove_suffix</code><span class="sig-paren">(</span><em class="sig-param">path: str, suffix: Optional[str]</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/file_utils.html#remove_suffix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.file_utils.remove_suffix" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the suffix from the path if file name without extension ends with it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – name with prefix</p></li>
<li><p><strong>suffix</strong> – suffix to remove</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>name with removed suffix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>name_without_suffix</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.git_utils">
<span id="nucleus7-utils-git-utils-module"></span><h2>nucleus7.utils.git_utils module<a class="headerlink" href="#module-nucleus7.utils.git_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to work with git, e.g. obtain the hash</p>
<dl class="function">
<dt id="nucleus7.utils.git_utils.get_git_revision_hash_from_dir">
<code class="sig-prename descclassname">nucleus7.utils.git_utils.</code><code class="sig-name descname">get_git_revision_hash_from_dir</code><span class="sig-paren">(</span><em class="sig-param">cwd: str = None</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/git_utils.html#get_git_revision_hash_from_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.git_utils.get_git_revision_hash_from_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the git hash revision from directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cwd</strong> – directory with git</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>hash of the git</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>git_hash</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.git_utils.get_git_revision_hash_from_module_path">
<code class="sig-prename descclassname">nucleus7.utils.git_utils.</code><code class="sig-name descname">get_git_revision_hash_from_module_path</code><span class="sig-paren">(</span><em class="sig-param">module_path</em>, <em class="sig-param">default_package='nucleus7'</em><span class="sig-paren">)</span> &#x2192; Optional[str]<a class="reference internal" href="../_modules/nucleus7/utils/git_utils.html#get_git_revision_hash_from_module_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.git_utils.get_git_revision_hash_from_module_path" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>module_path</strong> – path to imported module</p></li>
<li><p><strong>default_package</strong> – name of default package of that module to use if the module has no
__file__ attribute</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ash of the git directory with module</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>git_hash</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.git_utils.get_git_revision_hash_from_obj">
<code class="sig-prename descclassname">nucleus7.utils.git_utils.</code><code class="sig-name descname">get_git_revision_hash_from_obj</code><span class="sig-paren">(</span><em class="sig-param">obj: object</em><span class="sig-paren">)</span> &#x2192; Optional[str]<a class="reference internal" href="../_modules/nucleus7/utils/git_utils.html#get_git_revision_hash_from_obj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.git_utils.get_git_revision_hash_from_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Get git revision from the object module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> – some object, git of which module will be checked</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>hash of the git holding object module</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>git_hash</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.git_utils.get_git_revision_short_hash">
<code class="sig-prename descclassname">nucleus7.utils.git_utils.</code><code class="sig-name descname">get_git_revision_short_hash</code><span class="sig-paren">(</span><em class="sig-param">cwd: str = None</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/git_utils.html#get_git_revision_short_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.git_utils.get_git_revision_short_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the short git hash revision from directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cwd</strong> – directory with git</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>short hash of the git</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>git_hash</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.graph_utils">
<span id="nucleus7-utils-graph-utils-module"></span><h2>nucleus7.utils.graph_utils module<a class="headerlink" href="#module-nucleus7.utils.graph_utils" title="Permalink to this headline">¶</a></h2>
<p>Classes and functions for regular graph manipulation</p>
<dl class="function">
<dt id="nucleus7.utils.graph_utils.check_class_topology">
<code class="sig-prename descclassname">nucleus7.utils.graph_utils.</code><code class="sig-name descname">check_class_topology</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.digraph.DiGraph</em>, <em class="sig-param">dependency_map: dict</em>, <em class="sig-param">incoming_nucleotides: Optional[List[nucleus7.core.nucleotide.Nucleotide]] = None</em>, <em class="sig-param">exclude_incoming_nucleotides: bool = True</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="../_modules/nucleus7/utils/graph_utils.html#check_class_topology"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.graph_utils.check_class_topology" title="Permalink to this definition">¶</a></dt>
<dd><p>Check class dependency in the model graph</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – graph with nucleotides as vertices</p></li>
<li><p><strong>dependency_map</strong> – map describing allowed inbound node classes respect to the node, e.g.
{<code class="xref py py-obj docutils literal notranslate"><span class="pre">ModelPlugin</span></code>: [<code class="xref py py-obj docutils literal notranslate"><span class="pre">ModelPlugin</span></code>]}</p></li>
<li><p><strong>incoming_nucleotides</strong> – list of incoming nucleotides</p></li>
<li><p><strong>exclude_incoming_nucleotides</strong> – if the incoming nucleotides will be excluded from topologicyl check,
e.g. they are allowed to be of different classes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if check passed else raises <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ValueError</span></code></a></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>status</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if some node has not allowed dependency</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.graph_utils.check_graph_connections">
<code class="sig-prename descclassname">nucleus7.utils.graph_utils.</code><code class="sig-name descname">check_graph_connections</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.digraph.DiGraph</em>, <em class="sig-param">incoming_nucleotides: Optional[List[nucleus7.core.nucleotide.Nucleotide]] = None</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="../_modules/nucleus7/utils/graph_utils.html#check_graph_connections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.graph_utils.check_graph_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the graph connectivity according to the input and output names</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – graph with nucleotides as vertices</p></li>
<li><p><strong>incoming_nucleotides</strong> – list of incoming nucleotides; will be excluded from check to its inbound
nodes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if check passed else raises <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ValueError</span></code></a></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>status</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if some node needs particular inputs that do not exist in the
    input nodes</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.graph_utils.check_node2node_connection">
<code class="sig-prename descclassname">nucleus7.utils.graph_utils.</code><code class="sig-name descname">check_node2node_connection</code><span class="sig-paren">(</span><em class="sig-param">nucleotide: nucleus7.core.nucleotide.Nucleotide, inbound_nucleotides: List[nucleus7.core.nucleotide.Nucleotide]</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="../_modules/nucleus7/utils/graph_utils.html#check_node2node_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.graph_utils.check_node2node_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the connectivity of node to all inbound nodes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nucleotide</strong> – nucleotide</p></li>
<li><p><strong>inbound_nucleotides</strong> – set of incoming nucleotides</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if all arguments to <cite>process</cite> or <cite>predict</cite> method of <cite>node</cite> are
taken from <cite>inbound_nodes</cite> else raises <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ValueError</span></code></a></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>status</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if the inputs to node cannot be taken from inbound_nodes</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.graph_utils.construct_graph_from_nucleotides">
<code class="sig-prename descclassname">nucleus7.utils.graph_utils.</code><code class="sig-name descname">construct_graph_from_nucleotides</code><span class="sig-paren">(</span><em class="sig-param">nucleotides: List[nucleus7.core.nucleotide.Nucleotide], incoming_nucleotides: Optional[List[nucleus7.core.nucleotide.Nucleotide]] = None</em><span class="sig-paren">)</span> &#x2192; networkx.classes.digraph.DiGraph<a class="reference internal" href="../_modules/nucleus7/utils/graph_utils.html#construct_graph_from_nucleotides"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.graph_utils.construct_graph_from_nucleotides" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct graph from nucleotides</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nucleotides</strong> – nucleotides</p></li>
<li><p><strong>incoming_nucleotides</strong> – incoming nucleotides, which will be added to nucleotides to construct
the graph, but their connections to their inbound nodes will be
ignored</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>graph with nucleotides as vertices</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>graph</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if graph contains loops</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.graph_utils.get_repeated_node_names">
<code class="sig-prename descclassname">nucleus7.utils.graph_utils.</code><code class="sig-name descname">get_repeated_node_names</code><span class="sig-paren">(</span><em class="sig-param">nucleotides: List[nucleus7.core.nucleotide.Nucleotide]</em><span class="sig-paren">)</span> &#x2192; Dict[str, list]<a class="reference internal" href="../_modules/nucleus7/utils/graph_utils.html#get_repeated_node_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.graph_utils.get_repeated_node_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the non unique names of the nucleotides inside of each gene</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nucleotides</strong> – list of nucleotides</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>nucleotide names as keys and list of class names as values for repeated
nucleotides</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>repeated_nucleotide_names_to_class_names</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.graph_utils.topological_sort_of_nucleotides">
<code class="sig-prename descclassname">nucleus7.utils.graph_utils.</code><code class="sig-name descname">topological_sort_of_nucleotides</code><span class="sig-paren">(</span><em class="sig-param">graph: networkx.classes.digraph.DiGraph</em><span class="sig-paren">)</span> &#x2192; List[nucleus7.core.nucleotide.Nucleotide]<a class="reference internal" href="../_modules/nucleus7/utils/graph_utils.html#topological_sort_of_nucleotides"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.graph_utils.topological_sort_of_nucleotides" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform topological order of the graph</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>graph</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of nucleotides sorted in topological order</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sorted_nucleotides</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.io_utils">
<span id="nucleus7-utils-io-utils-module"></span><h2>nucleus7.utils.io_utils module<a class="headerlink" href="#module-nucleus7.utils.io_utils" title="Permalink to this headline">¶</a></h2>
<p>IO utils</p>
<dl class="function">
<dt id="nucleus7.utils.io_utils.add_args_from_method_to_argparse">
<code class="sig-prename descclassname">nucleus7.utils.io_utils.</code><code class="sig-name descname">add_args_from_method_to_argparse</code><span class="sig-paren">(</span><em class="sig-param">parser: argparse.ArgumentParser</em>, <em class="sig-param">cls: Callable</em>, <em class="sig-param">method: Callable</em>, <em class="sig-param">method_with_doc: Callable = None</em>, <em class="sig-param">include_parents: bool = True</em><span class="sig-paren">)</span> &#x2192; argparse.ArgumentParser<a class="reference internal" href="../_modules/nucleus7/utils/io_utils.html#add_args_from_method_to_argparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.io_utils.add_args_from_method_to_argparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the args from method and add it to argparse parser</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parser</strong> – parser to add the arguments</p></li>
<li><p><strong>cls</strong> – class with method to parse</p></li>
<li><p><strong>method</strong> – callable to get the arguments</p></li>
<li><p><strong>method_with_doc</strong> – method to read the docs; if not specified, then original method will
be used</p></li>
<li><p><strong>include_parents</strong> – if parent methods should be traced too</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>parser with added arguments</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>parser_new</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.io_utils.is_jsonserializable">
<code class="sig-prename descclassname">nucleus7.utils.io_utils.</code><code class="sig-name descname">is_jsonserializable</code><span class="sig-paren">(</span><em class="sig-param">x: object</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="../_modules/nucleus7/utils/io_utils.html#is_jsonserializable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.io_utils.is_jsonserializable" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the object is json serializable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> – object to check</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if object can be serialized as json and False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>status</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.io_utils.load_json">
<code class="sig-prename descclassname">nucleus7.utils.io_utils.</code><code class="sig-name descname">load_json</code><span class="sig-paren">(</span><em class="sig-param">fname: str</em>, <em class="sig-param">as_ordereddict: bool = False</em>, <em class="sig-param">remove_private: bool = True</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/io_utils.html#load_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.io_utils.load_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the json file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> – path to json file</p></li>
<li><p><strong>as_ordereddict</strong> – controls if the resulting dict in case if x is the path to json
will be returned as a ordered dict</p></li>
<li><p><strong>remove_private</strong> – if the private keys inside of json, e.g. starting with ‘_’ should be
removed</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>loaded json</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict_from_json</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.io_utils.maybe_load_json">
<code class="sig-prename descclassname">nucleus7.utils.io_utils.</code><code class="sig-name descname">maybe_load_json</code><span class="sig-paren">(</span><em class="sig-param">x: Union[str, dict, list], as_ordereddict: bool = False</em><span class="sig-paren">)</span> &#x2192; Union[dict, list, str]<a class="reference internal" href="../_modules/nucleus7/utils/io_utils.html#maybe_load_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.io_utils.maybe_load_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whther the x is file and in this case loads as json</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – path to json file or a string with serialized json or any other object</p></li>
<li><p><strong>as_ordereddict</strong> – controls if the resulting dict in case if x is the path to json
will be returned as a ordered dict</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>laded json or literally evaluated json string or x itself</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>loaded_object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.io_utils.maybe_mkdir">
<code class="sig-prename descclassname">nucleus7.utils.io_utils.</code><code class="sig-name descname">maybe_mkdir</code><span class="sig-paren">(</span><em class="sig-param">path: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/io_utils.html#maybe_mkdir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.io_utils.maybe_mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Create directory if it not exists</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – directory path</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.io_utils.print_gflags">
<code class="sig-prename descclassname">nucleus7.utils.io_utils.</code><code class="sig-name descname">print_gflags</code><span class="sig-paren">(</span><em class="sig-param">args: argparse.Namespace</em>, <em class="sig-param">space_n: int = 10</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/io_utils.html#print_gflags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.io_utils.print_gflags" title="Permalink to this definition">¶</a></dt>
<dd><p>Get flags as a string to print</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – used flags</p></li>
<li><p><strong>space_n</strong> – number of spaces for tabulation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string to print the flags</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>flags_string</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.jupyter_utils">
<span id="nucleus7-utils-jupyter-utils-module"></span><h2>nucleus7.utils.jupyter_utils module<a class="headerlink" href="#module-nucleus7.utils.jupyter_utils" title="Permalink to this headline">¶</a></h2>
<p>File containing utility functions for jupyter notebooks
If you just run this file, it will convert build_and_train.ipynb to a
.py-file which can be used for debugging</p>
<dl class="function">
<dt id="nucleus7.utils.jupyter_utils.convert_jupyter_to_python">
<code class="sig-prename descclassname">nucleus7.utils.jupyter_utils.</code><code class="sig-name descname">convert_jupyter_to_python</code><span class="sig-paren">(</span><em class="sig-param">path_in: str</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/jupyter_utils.html#convert_jupyter_to_python"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.jupyter_utils.convert_jupyter_to_python" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert jupyter notebook to python code</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path_in</strong> – path to jupyter notebook</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>path to python code</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>path_to_python_code</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.jupyter_utils.read_file_and_execute">
<code class="sig-prename descclassname">nucleus7.utils.jupyter_utils.</code><code class="sig-name descname">read_file_and_execute</code><span class="sig-paren">(</span><em class="sig-param">path_in</em>, <em class="sig-param">delete=False</em>, <em class="sig-param">prefix=None</em>, <em class="sig-param">exec_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/jupyter_utils.html#read_file_and_execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.jupyter_utils.read_file_and_execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Read file and execute it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_in</strong> – path to file to execute</p></li>
<li><p><strong>delete</strong> – flag if the file must be deleted after read</p></li>
<li><p><strong>prefix</strong> – prefix to add to the file before execution</p></li>
<li><p><strong>exec_dir</strong> – directory to execute</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.kpi_utils">
<span id="nucleus7-utils-kpi-utils-module"></span><h2>nucleus7.utils.kpi_utils module<a class="headerlink" href="#module-nucleus7.utils.kpi_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils for KPI calculation</p>
<dl class="function">
<dt id="nucleus7.utils.kpi_utils.filter_kpi_values">
<code class="sig-prename descclassname">nucleus7.utils.kpi_utils.</code><code class="sig-name descname">filter_kpi_values</code><span class="sig-paren">(</span><em class="sig-param">kpi: dict</em>, <em class="sig-param">return_flattened: bool = False) -&gt; (&lt;class 'dict'&gt;</em>, <em class="sig-param">&lt;class 'dict'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/kpi_utils.html#filter_kpi_values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.kpi_utils.filter_kpi_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter kpis according to its value type. If kpi value is not of type str
or number, it will be filtered out. If value is numpy array of size 1, then
element will be selected and not filtered out.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kpi</strong> – dict, possibly nested, mapping kpi names to its values</p></li>
<li><p><strong>return_flattened</strong> – flag to return flattened dict and do not unflatten it back</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>kpi_filtered</em> – dict with same structure as kpi, but only with values of numbers and
string type</p></li>
<li><p><em>kpi_filtered_out</em> – dict with same structure as kpi with values other then numbers and
string type</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.log_utils">
<span id="nucleus7-utils-log-utils-module"></span><h2>nucleus7.utils.log_utils module<a class="headerlink" href="#module-nucleus7.utils.log_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils for logging</p>
<dl class="function">
<dt id="nucleus7.utils.log_utils.log_nucleotide_inputs_outputs">
<code class="sig-prename descclassname">nucleus7.utils.log_utils.</code><code class="sig-name descname">log_nucleotide_inputs_outputs</code><span class="sig-paren">(</span><em class="sig-param">log_level: str = 'debug'</em>, <em class="sig-param">shape_fn: Callable = &lt;function shape&gt;</em>, <em class="sig-param">logger: Optional[logging.Logger] = None</em><span class="sig-paren">)</span> &#x2192; Callable<a class="reference internal" href="../_modules/nucleus7/utils/log_utils.html#log_nucleotide_inputs_outputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.log_utils.log_nucleotide_inputs_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Log nucleotide inputs and outputs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_level</strong> – level of the logging to use; should be one of [info, debug]</p></li>
<li><p><strong>shape_fn</strong> – function to get the shape for objects other than tensorflow tensors</p></li>
<li><p><strong>logger</strong> – logger to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>wrapped function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>wrapped_function</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.mlflow_utils">
<span id="nucleus7-utils-mlflow-utils-module"></span><h2>nucleus7.utils.mlflow_utils module<a class="headerlink" href="#module-nucleus7.utils.mlflow_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to incorporate mlflow</p>
<dl class="function">
<dt id="nucleus7.utils.mlflow_utils.create_mlflow_experiment_and_start_run">
<code class="sig-prename descclassname">nucleus7.utils.mlflow_utils.</code><code class="sig-name descname">create_mlflow_experiment_and_start_run</code><span class="sig-paren">(</span><em class="sig-param">run_method: Callable</em><span class="sig-paren">)</span> &#x2192; Callable<a class="reference internal" href="../_modules/nucleus7/utils/mlflow_utils.html#create_mlflow_experiment_and_start_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.mlflow_utils.create_mlflow_experiment_and_start_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper about run method to start the mlflow experiment and log
parameters to it.</p>
<p>Will also log the configs as artifact</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>run_method</strong> – run method to decorate</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>wrapped method</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>wrapper</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.mlflow_utils.create_new_or_continue_experiment">
<code class="sig-prename descclassname">nucleus7.utils.mlflow_utils.</code><code class="sig-name descname">create_new_or_continue_experiment</code><span class="sig-paren">(</span><em class="sig-param">project_dir: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/mlflow_utils.html#create_new_or_continue_experiment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.mlflow_utils.create_new_or_continue_experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new experiment or continues already existing one.</p>
<p>Experiment name is the name of the project_dir</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>project_dir</strong> – project directory</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.mlflow_utils.log_config_parameter_to_mlflow">
<code class="sig-prename descclassname">nucleus7.utils.mlflow_utils.</code><code class="sig-name descname">log_config_parameter_to_mlflow</code><span class="sig-paren">(</span><em class="sig-param">param_name: str</em>, <em class="sig-param">param_value: Any</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/mlflow_utils.html#log_config_parameter_to_mlflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.mlflow_utils.log_config_parameter_to_mlflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the parameter with its value to mlflow.</p>
<p>If value is malformed, it will be ignored and logging notification will
be added</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>param_name</strong> – parameter name to log</p></li>
<li><p><strong>param_value</strong> – value to log</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.mlflow_utils.log_metric_to_mlflow">
<code class="sig-prename descclassname">nucleus7.utils.mlflow_utils.</code><code class="sig-name descname">log_metric_to_mlflow</code><span class="sig-paren">(</span><em class="sig-param">metric_name: str</em>, <em class="sig-param">metric_value: Any</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/mlflow_utils.html#log_metric_to_mlflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.mlflow_utils.log_metric_to_mlflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the metric with its value to mlflow.</p>
<p>If value is malformed, it will be ignored and logging notification will
be added</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>metric_name</strong> – metric name to log</p></li>
<li><p><strong>metric_value</strong> – value to log</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.mlflow_utils.log_nucleotide_exec_time_to_mlflow">
<code class="sig-prename descclassname">nucleus7.utils.mlflow_utils.</code><code class="sig-name descname">log_nucleotide_exec_time_to_mlflow</code><span class="sig-paren">(</span><em class="sig-param">method_name: Optional[str] = None</em>, <em class="sig-param">prefix: str = 'exec_time'</em>, <em class="sig-param">log_on_train: bool = False</em>, <em class="sig-param">log_on_eval: bool = False</em>, <em class="sig-param">log_on_infer: bool = True</em><span class="sig-paren">)</span> &#x2192; Callable<a class="reference internal" href="../_modules/nucleus7/utils/mlflow_utils.html#log_nucleotide_exec_time_to_mlflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.mlflow_utils.log_nucleotide_exec_time_to_mlflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the time of the function to mlflow</p>
<p>Parameter will be logged to metrics with the name
“performance–{prefix}, [s]–{object_name}–{mode (if was set)}–
{method_name (if is not None)}”
and value of time needed to call it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefix</strong> – prefix to use for parameter name</p></li>
<li><p><strong>method_name</strong> – name of the method</p></li>
<li><p><strong>log_on_train</strong> – if the performance time should be logged during training</p></li>
<li><p><strong>log_on_eval</strong> – if the performance time should be logged during evaluation</p></li>
<li><p><strong>log_on_infer</strong> – if the performance time should be logged during inference</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>wrapped method</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>wrapper</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.mlflow_utils.log_project_artifacts_to_mlflow">
<code class="sig-prename descclassname">nucleus7.utils.mlflow_utils.</code><code class="sig-name descname">log_project_artifacts_to_mlflow</code><span class="sig-paren">(</span><em class="sig-param">function: Callable</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/mlflow_utils.html#log_project_artifacts_to_mlflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.mlflow_utils.log_project_artifacts_to_mlflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the artifact to mlflow</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>function</strong> – function to wrap</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.mlflow_utils.log_saved_model">
<code class="sig-prename descclassname">nucleus7.utils.mlflow_utils.</code><code class="sig-name descname">log_saved_model</code><span class="sig-paren">(</span><em class="sig-param">saved_model_path: Union[bytes, str], global_step: int, saved_model_load_fn: Callable</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/mlflow_utils.html#log_saved_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.mlflow_utils.log_saved_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Log all the saved models to mlflow</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>saved_model_path</strong> – path to saved model</p></li>
<li><p><strong>global_step</strong> – global step for saved model</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.model_utils">
<span id="nucleus7-utils-model-utils-module"></span><h2>nucleus7.utils.model_utils module<a class="headerlink" href="#module-nucleus7.utils.model_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils for model</p>
<dl class="class">
<dt id="nucleus7.utils.model_utils.CustomSessionHandlerMixin">
<em class="property">class </em><code class="sig-prename descclassname">nucleus7.utils.model_utils.</code><code class="sig-name descname">CustomSessionHandlerMixin</code><a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#CustomSessionHandlerMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.CustomSessionHandlerMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Mixin for custom tensorflow session handling,
like custom initialization etc.</p>
<dl class="method">
<dt id="nucleus7.utils.model_utils.CustomSessionHandlerMixin.initialize_session">
<code class="sig-name descname">initialize_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#CustomSessionHandlerMixin.initialize_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.CustomSessionHandlerMixin.initialize_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to initialize the custom session variables.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nucleus7.utils.model_utils.DefaultPlaceholderInfo">
<em class="property">class </em><code class="sig-prename descclassname">nucleus7.utils.model_utils.</code><code class="sig-name descname">DefaultPlaceholderInfo</code><span class="sig-paren">(</span><em class="sig-param">full_name</em>, <em class="sig-param">placeholder</em>, <em class="sig-param">default_value</em><span class="sig-paren">)</span><a class="headerlink" href="#nucleus7.utils.model_utils.DefaultPlaceholderInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a></p>
<dl class="method">
<dt id="nucleus7.utils.model_utils.DefaultPlaceholderInfo.__getnewargs__">
<code class="sig-name descname">__getnewargs__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nucleus7.utils.model_utils.DefaultPlaceholderInfo.__getnewargs__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self as a plain tuple.  Used by copy and pickle.</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.model_utils.DefaultPlaceholderInfo.__new__">
<em class="property">static </em><code class="sig-name descname">__new__</code><span class="sig-paren">(</span><em class="sig-param">_cls</em>, <em class="sig-param">full_name</em>, <em class="sig-param">placeholder</em>, <em class="sig-param">default_value</em><span class="sig-paren">)</span><a class="headerlink" href="#nucleus7.utils.model_utils.DefaultPlaceholderInfo.__new__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new instance of DefaultPlaceholderInfo(full_name, placeholder, default_value)</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.model_utils.DefaultPlaceholderInfo.__repr__">
<code class="sig-name descname">__repr__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nucleus7.utils.model_utils.DefaultPlaceholderInfo.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a nicely formatted representation string</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.model_utils.DefaultPlaceholderInfo.default_value">
<em class="property">property </em><code class="sig-name descname">default_value</code><a class="headerlink" href="#nucleus7.utils.model_utils.DefaultPlaceholderInfo.default_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.model_utils.DefaultPlaceholderInfo.full_name">
<em class="property">property </em><code class="sig-name descname">full_name</code><a class="headerlink" href="#nucleus7.utils.model_utils.DefaultPlaceholderInfo.full_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.model_utils.DefaultPlaceholderInfo.placeholder">
<em class="property">property </em><code class="sig-name descname">placeholder</code><a class="headerlink" href="#nucleus7.utils.model_utils.DefaultPlaceholderInfo.placeholder" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nucleus7.utils.model_utils.DefaultPlaceholderMixin">
<em class="property">class </em><code class="sig-prename descclassname">nucleus7.utils.model_utils.</code><code class="sig-name descname">DefaultPlaceholderMixin</code><a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#DefaultPlaceholderMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.DefaultPlaceholderMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Mixin to add the possibility to wrap model parameters as default
placeholders. This allows to modify the parameter value after training,
e.g. during inference</p>
<dl class="method">
<dt id="nucleus7.utils.model_utils.DefaultPlaceholderMixin.add_default_placeholder">
<code class="sig-name descname">add_default_placeholder</code><span class="sig-paren">(</span><em class="sig-param">value, name: str, dtype: Optional[tensorflow.python.framework.dtypes.DType] = None, shape: Union[int, List[int], Tuple[int], None] = -1, broadcast_shape: Optional[List[int]] = None</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.framework.ops.Tensor<a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#DefaultPlaceholderMixin.add_default_placeholder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.DefaultPlaceholderMixin.add_default_placeholder" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert value to default placeholder and add it to internal state.</p>
<p>If placeholder with this name already exists, will return it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – value of placeholder</p></li>
<li><p><strong>name</strong> – name of the placeholder; will be accessible for inference through
the ‘nucleotide_name//name’ argument.</p></li>
<li><p><strong>dtype</strong> – if specified, cast placeholder to this format</p></li>
<li><p><strong>shape</strong> – shape of placeholder to use</p></li>
<li><p><strong>broadcast_shape</strong> – shape to broadcast the placeholder to if needed</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value as default placeholder</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>value_as_default_placeholder</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.model_utils.DefaultPlaceholderMixin.default_placeholders">
<em class="property">property </em><code class="sig-name descname">default_placeholders</code><a class="headerlink" href="#nucleus7.utils.model_utils.DefaultPlaceholderMixin.default_placeholders" title="Permalink to this definition">¶</a></dt>
<dd><p>All default placeholders as mapping of name to placeholder</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>name to placeholder map</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>name_to_placeholder_map</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.model_utils.DefaultPlaceholderMixin.remove_all_placeholders">
<code class="sig-name descname">remove_all_placeholders</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#DefaultPlaceholderMixin.remove_all_placeholders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.DefaultPlaceholderMixin.remove_all_placeholders" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all placeholders which were added through the
add_default_placeholder interface</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nucleus7.utils.model_utils.KerasLayersMixin">
<em class="property">class </em><code class="sig-prename descclassname">nucleus7.utils.model_utils.</code><code class="sig-name descname">KerasLayersMixin</code><a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#KerasLayersMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.KerasLayersMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Mixin to use to add the keras layers to the nucleotide.</p>
<p>This is needed because of different variable sharing between tensorflow
layers and its variables and keras layers, since tensorflow uses
<code class="xref py py-func docutils literal notranslate"><span class="pre">tf.get_variable()</span></code> and keras uses <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.Variable</span></code> and also
<code class="xref py py-func docutils literal notranslate"><span class="pre">tf.get_variable_scope().reuse()</span></code> doesn’t work with keras layers.</p>
<dl class="method">
<dt id="nucleus7.utils.model_utils.KerasLayersMixin.add_keras_layer">
<code class="sig-name descname">add_keras_layer</code><span class="sig-paren">(</span><em class="sig-param">layer: Callable</em>, <em class="sig-param">name: Optional[str] = None</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.keras.engine.base_layer.Layer<a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#KerasLayersMixin.add_keras_layer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.KerasLayersMixin.add_keras_layer" title="Permalink to this definition">¶</a></dt>
<dd><p>Add layer or model to self.keras_layers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>layer</strong> – keras layer to add or a function without parameters which will
return a keras layer / model</p></li>
<li><p><strong>name</strong> – name to store it; if this name already exist, will return layer
from internal map and not store new one; must be set if the
callable was provided as layer parameter</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>same layer as input layer</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>layer</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if provided layer is not an instance of keras layer</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.model_utils.KerasLayersMixin.create_keras_layers">
<code class="sig-name descname">create_keras_layers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#KerasLayersMixin.create_keras_layers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.KerasLayersMixin.create_keras_layers" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize and assign the keras layers used in this plugin</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.model_utils.KerasLayersMixin.keras_layers">
<em class="property">property </em><code class="sig-name descname">keras_layers</code><a class="headerlink" href="#nucleus7.utils.model_utils.KerasLayersMixin.keras_layers" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all keras layers; if no keras layers were added, return empty list</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of keras layers</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>keras_layers</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.model_utils.KerasLayersMixin.keras_layers_with_names">
<em class="property">property </em><code class="sig-name descname">keras_layers_with_names</code><a class="headerlink" href="#nucleus7.utils.model_utils.KerasLayersMixin.keras_layers_with_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all keras layers as mapping of layer name to the layer</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict with mapping {keras_layer_name: layer}</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>keras_layer_name_to_layer_map</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.model_utils.KerasLayersMixin.reset_keras_layers">
<code class="sig-name descname">reset_keras_layers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#KerasLayersMixin.reset_keras_layers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.KerasLayersMixin.reset_keras_layers" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset keras layers or layers of keras.models by setting its
self.built = False</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.model_utils.add_histogram_summary">
<code class="sig-prename descclassname">nucleus7.utils.model_utils.</code><code class="sig-name descname">add_histogram_summary</code><span class="sig-paren">(</span><em class="sig-param">summary_name: str</em>, <em class="sig-param">value: tensorflow.python.framework.ops.Tensor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#add_histogram_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.add_histogram_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Add histogram summary and also replace NaN in the value if needed on runtime</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>summary_name</strong> – name of the summary</p></li>
<li><p><strong>value</strong> – histogram value to add to summary with name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.model_utils.add_summary_by_name">
<code class="sig-prename descclassname">nucleus7.utils.model_utils.</code><code class="sig-name descname">add_summary_by_name</code><span class="sig-paren">(</span><em class="sig-param">summary_name: str</em>, <em class="sig-param">summary_value: tensorflow.python.framework.ops.Tensor</em>, <em class="sig-param">max_outputs_tb: int = 1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#add_summary_by_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.add_summary_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the summary defining the type of it by name and subtracting
the prefix from name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>summary_name</strong> – name of the summary</p></li>
<li><p><strong>summary_value</strong> – value of summary</p></li>
<li><p><strong>max_outputs_tb</strong> – number of maximum outputs in tensorboard e.g. for images</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.model_utils.get_iteration_stat_from_global_step">
<code class="sig-prename descclassname">nucleus7.utils.model_utils.</code><code class="sig-name descname">get_iteration_stat_from_global_step</code><span class="sig-paren">(</span><em class="sig-param">mode: str, global_step: Union[int, tensorflow.python.framework.ops.Tensor], previous_iteration_number: int, number_iterations_per_epoch: int, max_number_of_iterations_per_epoch: int</em><span class="sig-paren">)</span> &#x2192; Tuple[int, int, int]<a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#get_iteration_stat_from_global_step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.get_iteration_stat_from_global_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate iteration statistics like epoch number, iteration number
and summary step out of global_step for particular mode</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> – mode of the model</p></li>
<li><p><strong>global_step</strong> – global step</p></li>
<li><p><strong>previous_iteration_number</strong> – previous iteration number for eval mode, since it cannot be inferred
from global step</p></li>
<li><p><strong>number_iterations_per_epoch</strong> – number of iterations per epoch, which is needed to calculate the summary
step offset</p></li>
<li><p><strong>max_number_of_iterations_per_epoch</strong> – max number of iterations per epoch</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>epoch_number</em> – epoch number</p></li>
<li><p><em>iteration_number</em> – iteration number</p></li>
<li><p><em>summary_step</em> – summary step</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.model_utils.get_or_create_early_stop_var">
<code class="sig-prename descclassname">nucleus7.utils.model_utils.</code><code class="sig-name descname">get_or_create_early_stop_var</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; tensorflow.python.ops.variables.VariableV1<a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#get_or_create_early_stop_var"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.get_or_create_early_stop_var" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new variable for early stopping or returns existing one</p>
<p>Wrapper across early_stopping._get_or_create_stop_var</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>variable for early stopping</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>early_stop_var</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.model_utils.select_inputs_by_sample_mask">
<code class="sig-prename descclassname">nucleus7.utils.model_utils.</code><code class="sig-name descname">select_inputs_by_sample_mask</code><span class="sig-paren">(</span><em class="sig-param">sample_mask: tensorflow.python.framework.ops.Tensor</em>, <em class="sig-param">keys_to_exclude_from_sample_mask: Optional[List[str]] = None</em>, <em class="sig-param">**inputs</em><span class="sig-paren">)</span> &#x2192; Dict[str, tensorflow.python.framework.ops.Tensor]<a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#select_inputs_by_sample_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.select_inputs_by_sample_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Select inputs by masking out samples with sample_mask == 0</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sample_mask</strong> – tensor of shape [batch_size] with 1 indicating that sample should
be leaved as is and 0 - remove sample</p></li>
<li><p><strong>keys_to_exclude_from_sample_mask</strong> – list of keys that will not be masked using sample_mask</p></li>
<li><p><strong>**inputs</strong> – inputs to mask</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>masked inputs sample-wise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>masked_inputs</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.model_utils.select_inputs_by_sample_mask_np">
<code class="sig-prename descclassname">nucleus7.utils.model_utils.</code><code class="sig-name descname">select_inputs_by_sample_mask_np</code><span class="sig-paren">(</span><em class="sig-param">sample_mask: numpy.ndarray</em>, <em class="sig-param">keys_to_exclude_from_sample_mask: Optional[List[str]] = None</em>, <em class="sig-param">**inputs</em><span class="sig-paren">)</span> &#x2192; Dict[str, numpy.ndarray]<a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#select_inputs_by_sample_mask_np"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.select_inputs_by_sample_mask_np" title="Permalink to this definition">¶</a></dt>
<dd><p>Select inputs by masking out samples with sample_mask == 0</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sample_mask</strong> – tensor of shape [batch_size] with 1 indicating that sample should
be leaved as is and 0 - remove sample</p></li>
<li><p><strong>keys_to_exclude_from_sample_mask</strong> – list of keys that will not be masked using sample_mask</p></li>
<li><p><strong>**inputs</strong> – inputs to mask</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>masked inputs sample-wise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>masked_inputs</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.model_utils.split_inputs_to_devices">
<code class="sig-prename descclassname">nucleus7.utils.model_utils.</code><code class="sig-name descname">split_inputs_to_devices</code><span class="sig-paren">(</span><em class="sig-param">inputs: Dict[str, tensorflow.python.framework.ops.Tensor], num_devices: int</em><span class="sig-paren">)</span> &#x2192; List[Dict[str, tensorflow.python.framework.ops.Tensor]]<a class="reference internal" href="../_modules/nucleus7/utils/model_utils.html#split_inputs_to_devices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.model_utils.split_inputs_to_devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Split inputs to devices</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – dict of tensors</p></li>
<li><p><strong>num_devices</strong> – number of devices</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>list of length len(self.devices) with same structure as inputs but</em></p></li>
<li><p><em>with over first (batch) dimension</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.nest_utils">
<span id="nucleus7-utils-nest-utils-module"></span><h2>nucleus7.utils.nest_utils module<a class="headerlink" href="#module-nucleus7.utils.nest_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to work with nested structures</p>
<dl class="function">
<dt id="nucleus7.utils.nest_utils.combine_nested">
<code class="sig-prename descclassname">nucleus7.utils.nest_utils.</code><code class="sig-name descname">combine_nested</code><span class="sig-paren">(</span><em class="sig-param">list_of_nested: List[dict], combine_fun: Union[Dict[str, Callable], Callable]</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/nest_utils.html#combine_nested"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nest_utils.combine_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine list of nested structures according to combine_fun</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_of_nested</strong> – list of nested structures (lists, dicts, etc)</p></li>
<li><p><strong>combine_fun</strong> – method of combination, callable taking list of values as input
or dict with substring to match as keys and corresponding method
as value together; if there is no matching, the key ‘default’ will
be used; callable should take list of inputs together and return
only one tensor</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>same structure as first element of list_of_nested</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nested_combined</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nest_utils.dict_of_lists_to_list_of_dicts">
<code class="sig-prename descclassname">nucleus7.utils.nest_utils.</code><code class="sig-name descname">dict_of_lists_to_list_of_dicts</code><span class="sig-paren">(</span><em class="sig-param">dict_of_lists: Dict[object, list]</em><span class="sig-paren">)</span> &#x2192; list<a class="reference internal" href="../_modules/nucleus7/utils/nest_utils.html#dict_of_lists_to_list_of_dicts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nest_utils.dict_of_lists_to_list_of_dicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform the dict of with lists as values to list of dicts with single
values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dict_of_lists</strong> – dict with values as list</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list with dicts with single items as values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list_of_dicts</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nest_utils.flatten_nested_inputs">
<code class="sig-prename descclassname">nucleus7.utils.nest_utils.</code><code class="sig-name descname">flatten_nested_inputs</code><span class="sig-paren">(</span><em class="sig-param">*input_names</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/nest_utils.html#flatten_nested_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nest_utils.flatten_nested_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Function decorator to flatten particular inputs inside of decorated method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_names</strong> – names of kwargs to flatten inside of decorated method</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>method decorator</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>decorator</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nest_utils.flatten_nested_inputs_inside_of_list">
<code class="sig-prename descclassname">nucleus7.utils.nest_utils.</code><code class="sig-name descname">flatten_nested_inputs_inside_of_list</code><span class="sig-paren">(</span><em class="sig-param">*input_names</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/nest_utils.html#flatten_nested_inputs_inside_of_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nest_utils.flatten_nested_inputs_inside_of_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Function decorator to flatten list of nested inputs inside of decorated
method to list of flatten inputs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_names</strong> – names of kwargs to flatten inside of decorated method</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>method decorator</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>decorator</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nest_utils.flatten_nested_outputs">
<code class="sig-prename descclassname">nucleus7.utils.nest_utils.</code><code class="sig-name descname">flatten_nested_outputs</code><span class="sig-paren">(</span><em class="sig-param">function: Callable</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/nest_utils.html#flatten_nested_outputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nest_utils.flatten_nested_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to flatten the outputs from the decorated function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>function</strong> – function to decorate</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>decorated method</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>decorated_method</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nest_utils.flatten_nested_struct">
<code class="sig-prename descclassname">nucleus7.utils.nest_utils.</code><code class="sig-name descname">flatten_nested_struct</code><span class="sig-paren">(</span><em class="sig-param">d: dict</em>, <em class="sig-param">separator='//'</em>, <em class="sig-param">replace_named_tuple_with_dict=False</em>, <em class="sig-param">flatten_lists: bool = True</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/nest_utils.html#flatten_nested_struct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nest_utils.flatten_nested_struct" title="Permalink to this definition">¶</a></dt>
<dd><p>Take the nested struct of dicts and concatenates the keys with separator
to get one level depth dictionary</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flatten_nested_struct</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="go">{&#39;a//b&#39;: 1, &#39;a//c&#39;: 2, &#39;e&#39;: 3}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flatten_nested_struct</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;d1&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;d2&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}},</span>
<span class="go">                           &#39;e&#39;: [1, 2, {&#39;e1&#39;: 10}]})</span>
<span class="go">{&#39;a//b&#39;: 1, &#39;a//c&#39;: 2, &#39;a//d//d1&#39;: 2, &#39;a//d//d2&#39;: 4,</span>
<span class="go">&#39;e//0&#39;: 1, &#39;e//1&#39;: 2, &#39;e//2//e1&#39;: 10}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> – 2 level dictionary</p></li>
<li><p><strong>separator</strong> – separator to use in the name</p></li>
<li><p><strong>replace_named_tuple_with_dict</strong> – if the named tuples should be treated as a dict</p></li>
<li><p><strong>flatten_lists</strong> – if the lists should be also flatten</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>1 level dictionary</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>single_d</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nest_utils.unflatten_dict_to_nested">
<code class="sig-prename descclassname">nucleus7.utils.nest_utils.</code><code class="sig-name descname">unflatten_dict_to_nested</code><span class="sig-paren">(</span><em class="sig-param">d: dict</em>, <em class="sig-param">separator: str = '//'</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/nest_utils.html#unflatten_dict_to_nested"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nest_utils.unflatten_dict_to_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Unflatten the dictionary with depth of 1 using the separator and forms
new nested struct</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unflatten_dict_to_nested</span><span class="p">({</span><span class="s1">&#39;a//b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a//c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="go">{&#39;a&#39;: {&#39;b&#39;: 1, &#39;c&#39;: 2}, &#39;e&#39;: 3}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unflatten_dict_to_nested</span><span class="p">({</span><span class="s1">&#39;a//b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a//c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;a//d//d1&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="go">                              &#39;a//d//d2&#39;: 4,</span>
<span class="go">                              &#39;e//0&#39;: 1, &#39;e//1&#39;: 2, &#39;e//2//e1&#39;: 10})</span>
<span class="go">{&#39;a&#39;: {&#39;b&#39;: 1, &#39;c&#39;: 2, &#39;d&#39;: {&#39;d1&#39;: 2, &#39;d2&#39;: 4}}, &#39;e&#39;: [1, 2, {&#39;e1&#39;: 10}]}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> – 1 level depth dictionary</p></li>
<li><p><strong>separator</strong> – separator to use in the name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2 level dictionary</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nested_d</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nest_utils.unflatten_nested_inputs">
<code class="sig-prename descclassname">nucleus7.utils.nest_utils.</code><code class="sig-name descname">unflatten_nested_inputs</code><span class="sig-paren">(</span><em class="sig-param">*input_names</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/nest_utils.html#unflatten_nested_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nest_utils.unflatten_nested_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Class decorator to unflatten particular inputs inside of decorated method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_names</strong> – names of kwargs to unflatten inside of decorated method</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>class decorator</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>decorator</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nest_utils.unflatten_nested_outputs">
<code class="sig-prename descclassname">nucleus7.utils.nest_utils.</code><code class="sig-name descname">unflatten_nested_outputs</code><span class="sig-paren">(</span><em class="sig-param">function: Callable</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/nest_utils.html#unflatten_nested_outputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nest_utils.unflatten_nested_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to unflatten the outputs from the decorated function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>function</strong> – function to decorate</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>decorated method</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>decorated_method</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.np_utils">
<span id="nucleus7-utils-np-utils-module"></span><h2>nucleus7.utils.np_utils module<a class="headerlink" href="#module-nucleus7.utils.np_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to work with numpy arrays</p>
<dl class="function">
<dt id="nucleus7.utils.np_utils.dense_to_sparse">
<code class="sig-prename descclassname">nucleus7.utils.np_utils.</code><code class="sig-name descname">dense_to_sparse</code><span class="sig-paren">(</span><em class="sig-param">array: numpy.ndarray</em>, <em class="sig-param">sparse_value_as_zeroes=0</em><span class="sig-paren">)</span> &#x2192; Tuple[numpy.ndarray, numpy.ndarray, tuple]<a class="reference internal" href="../_modules/nucleus7/utils/np_utils.html#dense_to_sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.np_utils.dense_to_sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>take dense array a and returns dict with indices, values and shape</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> – dense array</p></li>
<li><p><strong>sparse_value_as_zeroes</strong> – value to use as a zero inside of generated sparse tensor</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>sparse_indices</em> – indices for sparse tensor</p></li>
<li><p><em>sparse_values</em> – values for sparse tensor</p></li>
<li><p><em>sparse_shape</em> – shape of the sparse tensor</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.np_utils.fig2rgb_array">
<code class="sig-prename descclassname">nucleus7.utils.np_utils.</code><code class="sig-name descname">fig2rgb_array</code><span class="sig-paren">(</span><em class="sig-param">fig: matplotlib.figure.Figure</em>, <em class="sig-param">expand_batch_dimension: bool = True</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="reference internal" href="../_modules/nucleus7/utils/np_utils.html#fig2rgb_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.np_utils.fig2rgb_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert matplotlib figure to numpy RGB array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fig</strong> – figure to convert</p></li>
<li><p><strong>expand_batch_dimension</strong> – if the single batch dimension should be added</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>figure as numpy array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>figure_as_array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.np_utils.stack_with_pad">
<code class="sig-prename descclassname">nucleus7.utils.np_utils.</code><code class="sig-name descname">stack_with_pad</code><span class="sig-paren">(</span><em class="sig-param">arrays: List[numpy.ndarray], axis=0, pad_value=0</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="reference internal" href="../_modules/nucleus7/utils/np_utils.html#stack_with_pad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.np_utils.stack_with_pad" title="Permalink to this definition">¶</a></dt>
<dd><p>Stack arrays and if they have equal number of dimensions, but different
shapes, pad them with pad_value to the maximum shape</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arrays</strong> – list of arrays to stack</p></li>
<li><p><strong>axis</strong> – axis to stack</p></li>
<li><p><strong>pad_value</strong> – value to use if arrays must be padded</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>stacked arrays</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>stacked_arrays</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if arrays is empty</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if arrays have different number of dimensions</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.nucleotide_utils">
<span id="nucleus7-utils-nucleotide-utils-module"></span><h2>nucleus7.utils.nucleotide_utils module<a class="headerlink" href="#module-nucleus7.utils.nucleotide_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to work with nucleotides</p>
<dl class="class">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo">
<em class="property">class </em><code class="sig-prename descclassname">nucleus7.utils.nucleotide_utils.</code><code class="sig-name descname">NucleotideInfo</code><span class="sig-paren">(</span><em class="sig-param">nucleotide</em>, <em class="sig-param">class_name</em>, <em class="sig-param">base_classes</em>, <em class="sig-param">constructor_parameters</em>, <em class="sig-param">description</em>, <em class="sig-param">incoming_keys_description</em>, <em class="sig-param">generated_keys_description</em>, <em class="sig-param">dynamic_incoming_keys</em>, <em class="sig-param">dynamic_generated_keys</em><span class="sig-paren">)</span><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a></p>
<dl class="method">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo.__getnewargs__">
<code class="sig-name descname">__getnewargs__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo.__getnewargs__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self as a plain tuple.  Used by copy and pickle.</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo.__new__">
<em class="property">static </em><code class="sig-name descname">__new__</code><span class="sig-paren">(</span><em class="sig-param">_cls</em>, <em class="sig-param">nucleotide</em>, <em class="sig-param">class_name</em>, <em class="sig-param">base_classes</em>, <em class="sig-param">constructor_parameters</em>, <em class="sig-param">description</em>, <em class="sig-param">incoming_keys_description</em>, <em class="sig-param">generated_keys_description</em>, <em class="sig-param">dynamic_incoming_keys</em>, <em class="sig-param">dynamic_generated_keys</em><span class="sig-paren">)</span><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo.__new__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new instance of NucleotideInfo(nucleotide, class_name, base_classes, constructor_parameters, description, incoming_keys_description, generated_keys_description, dynamic_incoming_keys, dynamic_generated_keys)</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo.__repr__">
<code class="sig-name descname">__repr__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a nicely formatted representation string</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo.base_classes">
<em class="property">property </em><code class="sig-name descname">base_classes</code><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo.base_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo.class_name">
<em class="property">property </em><code class="sig-name descname">class_name</code><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo.class_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo.constructor_parameters">
<em class="property">property </em><code class="sig-name descname">constructor_parameters</code><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo.constructor_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo.description">
<em class="property">property </em><code class="sig-name descname">description</code><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo.description" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo.dynamic_generated_keys">
<em class="property">property </em><code class="sig-name descname">dynamic_generated_keys</code><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo.dynamic_generated_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 8</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo.dynamic_incoming_keys">
<em class="property">property </em><code class="sig-name descname">dynamic_incoming_keys</code><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo.dynamic_incoming_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 7</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo.generated_keys_description">
<em class="property">property </em><code class="sig-name descname">generated_keys_description</code><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo.generated_keys_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 6</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo.incoming_keys_description">
<em class="property">property </em><code class="sig-name descname">incoming_keys_description</code><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo.incoming_keys_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 5</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.nucleotide_utils.NucleotideInfo.nucleotide">
<em class="property">property </em><code class="sig-name descname">nucleotide</code><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.NucleotideInfo.nucleotide" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nucleotide_utils.collapse_inputs">
<code class="sig-prename descclassname">nucleus7.utils.nucleotide_utils.</code><code class="sig-name descname">collapse_inputs</code><span class="sig-paren">(</span><em class="sig-param">list_of_inputs: list</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/nucleotide_utils.html#collapse_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.collapse_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Collapse the list of dicts to one dict
If one key appears in multiple dicts, then the value in resulted dict
with this key will be the list of values from same key of inputs
otherwise input dicts are just combined</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">collapse_inputs</span><span class="p">([{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}])</span>
<span class="go">{&#39;a&#39;: [1, 3], &#39;b&#39;: 2, &#39;c&#39;: 4}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">collapse_inputs</span><span class="p">([{</span><span class="s1">&#39;alist&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;dict&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}},</span>
<span class="go">                      {&#39;alist&#39;: [3], &#39;dict&#39;: {&#39;c&#39;: 4}}])</span>
<span class="go">{&#39;alist&#39;: [[1], 2, 3], &#39;dict&#39;: {&#39;a&#39;: 10, &#39;c&#39;: 4}}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>list_of_inputs</strong> – list of dicts with values to collapse</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>collapsed version of the dict</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>collapsed_dict</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if provided combination of the types for same key in the collapsed
    dicts is not possible, e.g. it is not possible to collapse dict with
    list or value</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if there is a collision of the keys in collapsing of the dicts</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nucleotide_utils.format_nucleotide_info">
<code class="sig-prename descclassname">nucleus7.utils.nucleotide_utils.</code><code class="sig-name descname">format_nucleotide_info</code><span class="sig-paren">(</span><em class="sig-param">nucleotide_info: nucleus7.utils.nucleotide_utils.NucleotideInfo</em>, <em class="sig-param">width: int = 100</em>, <em class="sig-param">indent: int = 4</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/nucleotide_utils.html#format_nucleotide_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.format_nucleotide_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Print nucleotide statistics</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nucleotide_info</strong> – nucleotide info</p></li>
<li><p><strong>width</strong> – max width of the text</p></li>
<li><p><strong>indent</strong> – indent to use for dict data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>formatted string with nucleotide info</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nucleotide_info_as_text</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nucleotide_utils.get_class_name_and_register_package">
<code class="sig-prename descclassname">nucleus7.utils.nucleotide_utils.</code><code class="sig-name descname">get_class_name_and_register_package</code><span class="sig-paren">(</span><em class="sig-param">class_name: Optional[str] = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/nucleotide_utils.html#get_class_name_and_register_package"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.get_class_name_and_register_package" title="Permalink to this definition">¶</a></dt>
<dd><p>Return only class name from full name and register components from its
package</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>class_name</strong> – full path to object class including package which should be inside
PYTHONPATH</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>class name without package to retrieve the class from register</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>class_name</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nucleotide_utils.get_nucleotide_info">
<code class="sig-prename descclassname">nucleus7.utils.nucleotide_utils.</code><code class="sig-name descname">get_nucleotide_info</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">class_name: Optional[str] = None</em>, <em class="sig-param">nucleotide_cls: Optional[type] = None</em>, <em class="sig-param">nucleotide: Optional = None</em><span class="sig-paren">)</span> &#x2192; nucleus7.utils.nucleotide_utils.NucleotideInfo<a class="reference internal" href="../_modules/nucleus7/utils/nucleotide_utils.html#get_nucleotide_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.get_nucleotide_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Print statistics like incoming and generated keys and class
inheritance pattern</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>class_name</strong> – complete name of the nucleotide included the package where it is</p></li>
<li><p><strong>nucleotide_cls</strong> – nucleotide class</p></li>
<li><p><strong>nucleotide</strong> – nucleotide itself</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>nucleotide information</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nucleotide_info</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if both class_name and nucleotide_cls are provided</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nucleotide_utils.get_nucleotide_signature">
<code class="sig-prename descclassname">nucleus7.utils.nucleotide_utils.</code><code class="sig-name descname">get_nucleotide_signature</code><span class="sig-paren">(</span><em class="sig-param">nucleotide</em><span class="sig-paren">)</span> &#x2192; Tuple[dict, dict]<a class="reference internal" href="../_modules/nucleus7/utils/nucleotide_utils.html#get_nucleotide_signature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.get_nucleotide_signature" title="Permalink to this definition">¶</a></dt>
<dd><p>Return signature of nucleotide.</p>
<p>Arguments are taken from <cite>self.incoming_keys</cite> and returns from
<cite>self.generated_keys</cite>. If docstring exists to main method (predict or
process), then it is parsed to get descriptions of nodes. Docstring in
that case should be structured in numpydoc format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nucleotide</strong> – nucleotide</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>arguments</em> – dictionary with input names as keys and its help as value</p></li>
<li><p><em>return values</em> – dictionary with return value names as keys and its help as value</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>if there are no return values inside of return section of docstring or
inside of parameters section</p>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nucleotide_utils.get_sample_config_for_nucleotide">
<code class="sig-prename descclassname">nucleus7.utils.nucleotide_utils.</code><code class="sig-name descname">get_sample_config_for_nucleotide</code><span class="sig-paren">(</span><em class="sig-param">class_name: str</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/nucleotide_utils.html#get_sample_config_for_nucleotide"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.get_sample_config_for_nucleotide" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a default json for the class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>class_name</strong> – complete name of the nucleotide included the package where it is</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict containing a default the same structure as the json config</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>json_dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nucleotide_utils.remap_and_collapse_inputs">
<code class="sig-prename descclassname">nucleus7.utils.nucleotide_utils.</code><code class="sig-name descname">remap_and_collapse_inputs</code><span class="sig-paren">(</span><em class="sig-param">list_of_inputs: list</em>, <em class="sig-param">list_of_mappings: list</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/nucleotide_utils.html#remap_and_collapse_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.remap_and_collapse_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Remaps the inputs according to mapping and collapse them</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_of_inputs</strong> – list of dicts with values to collapse; can be nested</p></li>
<li><p><strong>list_of_mappings</strong> – list of dicts with corresponding mappings; each mapping can be
flat version of nested mapping with separator ‘:’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>remapped_and_collapsed_inputs</em> – collapsed version of the remapped inputs</p></li>
<li><p><em>See</em></p></li>
<li><p><em>—</em></p></li>
<li><p><a class="reference internal" href="#nucleus7.utils.nucleotide_utils.collapse_inputs" title="nucleus7.utils.nucleotide_utils.collapse_inputs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">collapse_inputs</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nucleotide_utils.remap_and_collapse_nucleotide_inputs">
<code class="sig-prename descclassname">nucleus7.utils.nucleotide_utils.</code><code class="sig-name descname">remap_and_collapse_nucleotide_inputs</code><span class="sig-paren">(</span><em class="sig-param">inputs: dict</em>, <em class="sig-param">nucleotide_names: Optional[list] = None</em>, <em class="sig-param">nucleotide_keys_mapping: Optional[dict] = None</em><span class="sig-paren">)</span> &#x2192; Optional[dict]<a class="reference internal" href="../_modules/nucleus7/utils/nucleotide_utils.html#remap_and_collapse_nucleotide_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.remap_and_collapse_nucleotide_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Remap and collapse nucleotide inputs according to the mapping</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – dict of inputs to the nucleotide, where highest level is the nucleotide
names mapping to corresponding data,
e.g. {nucleotide1: {key1: 1}, nucleotide2: {key2: 2}}</p></li>
<li><p><strong>nucleotide_names</strong> – nucleotide names from inputs to use; if not specified, all the inputs
will be used</p></li>
<li><p><strong>nucleotide_keys_mapping</strong> – mapping for keys for each nucleotide from nucleotide_names to remap,
e.g. {nucleotide1: {key1: new_key1}, nucleotide2: {key2: new_key2}}</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>remapped_and_collapsed_inputs</em> – collapsed version of the remapped inputs</p></li>
<li><p><em>See</em></p></li>
<li><p><em>—</em></p></li>
<li><p><a class="reference internal" href="#nucleus7.utils.nucleotide_utils.collapse_inputs" title="nucleus7.utils.nucleotide_utils.collapse_inputs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">collapse_inputs</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.nucleotide_utils.remap_single_input">
<code class="sig-prename descclassname">nucleus7.utils.nucleotide_utils.</code><code class="sig-name descname">remap_single_input</code><span class="sig-paren">(</span><em class="sig-param">inputs: dict</em>, <em class="sig-param">mapping: Optional[dict] = None</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/nucleotide_utils.html#remap_single_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.nucleotide_utils.remap_single_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Remap single input keys according to mapping</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – dict with inputs, where keys should be remapped</p></li>
<li><p><strong>mapping</strong> – mapping of old keys to new keys; if some key was not present, it will
be passed as is; if new key is “_”, it will be ignored in remapped
result</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>inputs with remapped keys</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>remapped_inputs</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.numpydoc_utils">
<span id="nucleus7-utils-numpydoc-utils-module"></span><h2>nucleus7.utils.numpydoc_utils module<a class="headerlink" href="#module-nucleus7.utils.numpydoc_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to work with numpydoc</p>
<dl class="function">
<dt id="nucleus7.utils.numpydoc_utils.doc_from_method">
<code class="sig-prename descclassname">nucleus7.utils.numpydoc_utils.</code><code class="sig-name descname">doc_from_method</code><span class="sig-paren">(</span><em class="sig-param">method: Callable</em><span class="sig-paren">)</span> &#x2192; Union[numpydoc.docscrape.NumpyDocString, dict]<a class="reference internal" href="../_modules/nucleus7/utils/numpydoc_utils.html#doc_from_method"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.numpydoc_utils.doc_from_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the docstring from method to NumpyDocString format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>method</strong> – callable to inspect</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>docstring</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>docstring</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.numpydoc_utils.get_dict_from_doc">
<code class="sig-prename descclassname">nucleus7.utils.numpydoc_utils.</code><code class="sig-name descname">get_dict_from_doc</code><span class="sig-paren">(</span><em class="sig-param">method: Callable</em>, <em class="sig-param">section: str</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/numpydoc_utils.html#get_dict_from_doc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.numpydoc_utils.get_dict_from_doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate dictionary from the doc section</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> – method with docstring</p></li>
<li><p><strong>section</strong> – section name to get the parameters</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary with parameters as keys and description as values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>doc_as_dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.numpydoc_utils.get_dict_from_doc_with_lists">
<code class="sig-prename descclassname">nucleus7.utils.numpydoc_utils.</code><code class="sig-name descname">get_dict_from_doc_with_lists</code><span class="sig-paren">(</span><em class="sig-param">method: Callable</em>, <em class="sig-param">section: str</em>, <em class="sig-param">bullet: str = '*'</em><span class="sig-paren">)</span> &#x2192; Dict[str, dict]<a class="reference internal" href="../_modules/nucleus7/utils/numpydoc_utils.html#get_dict_from_doc_with_lists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.numpydoc_utils.get_dict_from_doc_with_lists" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate dictionary from the doc section if description is a written
as list with bullets</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">method</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="go">    Attributes</span>
<span class="go">    ----------</span>
<span class="go">    incoming_keys : list</span>
<span class="go">        * inputs1 : description1</span>
<span class="go">        * inputs2 : description2</span>
<span class="go">    generated_keys : list</span>
<span class="go">        * predictions1 : description1</span>
<span class="go">        * predictions2 : description2</span>
<span class="go">    &#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_dict_from_doc_with_lists</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="s2">&quot;Attributes&quot;</span><span class="p">)</span>
<span class="go">{&#39;incoming_keys&#39;: {&#39;inputs1&#39;: description1,</span>
<span class="go">                   &#39;inputs2&#39;: description2},</span>
<span class="go"> &#39;generated_keys&#39;: {&#39;predictions1&#39;: description1,</span>
<span class="go">                    &#39;predictions2&#39;: description2}}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> – method with docstring</p></li>
<li><p><strong>section</strong> – section name to get the parameters</p></li>
<li><p><strong>bullet</strong> – bullet for list</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary with parameters as keys and description as values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>parameters_with_descriptions</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.numpydoc_utils.get_docs_of_method">
<code class="sig-prename descclassname">nucleus7.utils.numpydoc_utils.</code><code class="sig-name descname">get_docs_of_method</code><span class="sig-paren">(</span><em class="sig-param">cls: Optional[Callable] = None</em>, <em class="sig-param">method: Optional[Callable] = None</em>, <em class="sig-param">include_parents=True</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/numpydoc_utils.html#get_docs_of_method"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.numpydoc_utils.get_docs_of_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Read docs from method in NumpyDocFormat and optional add parent docs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cls</strong> – class with method to read the docs</p></li>
<li><p><strong>method</strong> – method to read the docs</p></li>
<li><p><strong>include_parents</strong> – if parent methods should be traced too</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict with args as keys and their descriptions as values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>docs</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.object_utils">
<span id="nucleus7-utils-object-utils-module"></span><h2>nucleus7.utils.object_utils module<a class="headerlink" href="#module-nucleus7.utils.object_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to work with objects</p>
<dl class="function">
<dt id="nucleus7.utils.object_utils.assert_is_built">
<code class="sig-prename descclassname">nucleus7.utils.object_utils.</code><code class="sig-name descname">assert_is_built</code><span class="sig-paren">(</span><em class="sig-param">function: Callable</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/object_utils.html#assert_is_built"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.object_utils.assert_is_built" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to check if self._built == True else raises ValueError
with name of object and message to build it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>function</strong> – method to decorate</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>decorated method</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>decorated_method</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if self.built != True</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.object_utils.assert_object_is_built">
<code class="sig-prename descclassname">nucleus7.utils.object_utils.</code><code class="sig-name descname">assert_object_is_built</code><span class="sig-paren">(</span><em class="sig-param">obj: object</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/object_utils.html#assert_object_is_built"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.object_utils.assert_object_is_built" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if object is built, e.g. self.built == True</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> – object to check</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>decorated method</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>decorated_method</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if object.built != True</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.object_utils.assert_property_is_defined">
<code class="sig-prename descclassname">nucleus7.utils.object_utils.</code><code class="sig-name descname">assert_property_is_defined</code><span class="sig-paren">(</span><em class="sig-param">property_name: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/object_utils.html#assert_property_is_defined"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.object_utils.assert_property_is_defined" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if object property is not None</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>property_name</strong> – name of the property</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if obj.[property] is None</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="nucleus7.utils.object_utils.classproperty">
<em class="property">class </em><code class="sig-prename descclassname">nucleus7.utils.object_utils.</code><code class="sig-name descname">classproperty</code><a class="reference internal" href="../_modules/nucleus7/utils/object_utils.html#classproperty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.object_utils.classproperty" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#property" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">property</span></code></a></p>
<p>Add the class property to class</p>
<p>Usage is same as a &#64;property, but this properties first argument is class
itself, not a object</p>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.object_utils.get_class_name_with_module">
<code class="sig-prename descclassname">nucleus7.utils.object_utils.</code><code class="sig-name descname">get_class_name_with_module</code><span class="sig-paren">(</span><em class="sig-param">obj</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/object_utils.html#get_class_name_with_module"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.object_utils.get_class_name_with_module" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the full class name, e.g. module name and class name out of the object
class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> – object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>module (if exist) and class name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>module_and_class_name</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.object_utils.get_full_method_signature">
<code class="sig-prename descclassname">nucleus7.utils.object_utils.</code><code class="sig-name descname">get_full_method_signature</code><span class="sig-paren">(</span><em class="sig-param">cls: Optional[Callable] = None</em>, <em class="sig-param">method: Optional[Callable] = None</em><span class="sig-paren">)</span> &#x2192; Tuple[List[str], List[str], Dict[str, Any]]<a class="reference internal" href="../_modules/nucleus7/utils/object_utils.html#get_full_method_signature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.object_utils.get_full_method_signature" title="Permalink to this definition">¶</a></dt>
<dd><p>This method gets all arguments of the current method as well as its
parents implementations. This is useful when creating a child class and
passing the constructor arguments to the parent using <cite>**kwargs</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cls</strong> – class to get the parents</p></li>
<li><p><strong>method</strong> – method of the class to search for parents</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>args</em> – list of args, e.g. ordered arguments</p></li>
<li><p><em>kwargs</em> – list of keyword only arguments</p></li>
<li><p><em>defaults</em> – dict with mapping of argument name to its default value</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.object_utils.get_method_signatures">
<code class="sig-prename descclassname">nucleus7.utils.object_utils.</code><code class="sig-name descname">get_method_signatures</code><span class="sig-paren">(</span><em class="sig-param">cls: Optional[Callable] = None</em>, <em class="sig-param">method: Optional[Callable] = None</em>, <em class="sig-param">include_parents: bool = True</em><span class="sig-paren">)</span> &#x2192; List[inspect.Signature]<a class="reference internal" href="../_modules/nucleus7/utils/object_utils.html#get_method_signatures"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.object_utils.get_method_signatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Get signature of the method together with signatures of the parents
:param cls: class to get the parents
:param method: method to search for
:param include_parents: if the parents must be included in the signatures</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>signatures in hierarchical order (method is first)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list_of_signatures</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.object_utils.get_object_name">
<code class="sig-prename descclassname">nucleus7.utils.object_utils.</code><code class="sig-name descname">get_object_name</code><span class="sig-paren">(</span><em class="sig-param">obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/object_utils.html#get_object_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.object_utils.get_object_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return object name or class name if object has no __name__ field. If it is     a class, return class name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> – Input to get name from</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The requested name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>name</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.object_utils.get_parent_method">
<code class="sig-prename descclassname">nucleus7.utils.object_utils.</code><code class="sig-name descname">get_parent_method</code><span class="sig-paren">(</span><em class="sig-param">cls: Optional[Callable] = None</em>, <em class="sig-param">method: Optional[Callable] = None</em><span class="sig-paren">)</span> &#x2192; Optional[List[Callable]]<a class="reference internal" href="../_modules/nucleus7/utils/object_utils.html#get_parent_method"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.object_utils.get_parent_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parent class if method is not specified otherwise get all parent
methods which are overridden by method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cls</strong> – class to get the parents</p></li>
<li><p><strong>method</strong> – method of the class to search for parents</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>parent class or method</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>parent</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.object_utils.recursive_getattr">
<code class="sig-prename descclassname">nucleus7.utils.object_utils.</code><code class="sig-name descname">recursive_getattr</code><span class="sig-paren">(</span><em class="sig-param">obj: object</em>, <em class="sig-param">attr_name: str</em>, <em class="sig-param">separator: str = '.'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/object_utils.html#recursive_getattr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.object_utils.recursive_getattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursive getattr to get the attr of the attr, e.g. if object has attribute
a and it is a object that holds a attribute b with value V, then you
can access it with <cite>recursive_getattr(obj, ‘a.b’)</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – object with attributes</p></li>
<li><p><strong>attr_name</strong> – name of the attribute to get; levels are separated using separator</p></li>
<li><p><strong>separator</strong> – separator to separate different attribute levels</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the recursive attribute of the object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>value</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.object_utils.select_fn_arguments_from_dict">
<code class="sig-prename descclassname">nucleus7.utils.object_utils.</code><code class="sig-name descname">select_fn_arguments_from_dict</code><span class="sig-paren">(</span><em class="sig-param">function: Callable</em>, <em class="sig-param">config: dict</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/object_utils.html#select_fn_arguments_from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.object_utils.select_fn_arguments_from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Select matching to function signature keyword parameters from config</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>function</strong> – function to get the parameters for</p></li>
<li><p><strong>config</strong> – configuration</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>keyword arguments for function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>kwargs</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.optimization_utils">
<span id="nucleus7-utils-optimization-utils-module"></span><h2>nucleus7.utils.optimization_utils module<a class="headerlink" href="#module-nucleus7.utils.optimization_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils for optimization</p>
<dl class="function">
<dt id="nucleus7.utils.optimization_utils.add_noise_to_grads_and_vars">
<code class="sig-prename descclassname">nucleus7.utils.optimization_utils.</code><code class="sig-name descname">add_noise_to_grads_and_vars</code><span class="sig-paren">(</span><em class="sig-param">grads_and_vars: List[Tuple[tensorflow.python.framework.ops.Tensor, tensorflow.python.ops.variables.VariableV1]], gradient_noise_std: float</em><span class="sig-paren">)</span> &#x2192; List[Tuple[tensorflow.python.framework.ops.Tensor, tensorflow.python.ops.variables.VariableV1]]<a class="reference internal" href="../_modules/nucleus7/utils/optimization_utils.html#add_noise_to_grads_and_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.optimization_utils.add_noise_to_grads_and_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Add normal random noise to gradients</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grads_and_vars</strong> – list of (gradient, variable)</p></li>
<li><p><strong>gradient_noise_std</strong> – standard deviation of the noise to add to gradients</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of (gradient with noise, variable)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>grads_and_vars</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.optimization_utils.average_grads_and_vars_from_multiple_devices">
<code class="sig-prename descclassname">nucleus7.utils.optimization_utils.</code><code class="sig-name descname">average_grads_and_vars_from_multiple_devices</code><span class="sig-paren">(</span><em class="sig-param">tower_grads_and_vars: List[List[Tuple[tensorflow.python.framework.ops.Tensor, tensorflow.python.ops.variables.VariableV1]]], consolidation_device: str, name_of_name_scope: str = 'gradient_averaging'</em><span class="sig-paren">)</span> &#x2192; List[Tuple[tensorflow.python.framework.ops.Tensor, tensorflow.python.ops.variables.VariableV1]]<a class="reference internal" href="../_modules/nucleus7/utils/optimization_utils.html#average_grads_and_vars_from_multiple_devices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.optimization_utils.average_grads_and_vars_from_multiple_devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Average gradients over all devices (towers)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tower_grads_and_vars</strong> – list of lists of gradients with variables for different devices (towers)</p></li>
<li><p><strong>consolidation_device</strong> – device to place the averaged gradients</p></li>
<li><p><strong>name_of_name_scope</strong> – name of name_scope to encapsulate this calculation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of (grads, vars) tuples</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>grads_and_vars</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.optimization_utils.clip_grads_and_vars">
<code class="sig-prename descclassname">nucleus7.utils.optimization_utils.</code><code class="sig-name descname">clip_grads_and_vars</code><span class="sig-paren">(</span><em class="sig-param">grads_and_vars: List[Tuple[tensorflow.python.framework.ops.Tensor, tensorflow.python.ops.variables.VariableV1]], gradient_clip: float, gradient_l2_norm: Optional[tensorflow.python.framework.ops.Tensor] = None</em><span class="sig-paren">)</span> &#x2192; List[Tuple[tensorflow.python.framework.ops.Tensor, tensorflow.python.ops.variables.VariableV1]]<a class="reference internal" href="../_modules/nucleus7/utils/optimization_utils.html#clip_grads_and_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.optimization_utils.clip_grads_and_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Clip all the gradients according to global normal with gradient_clip</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grads_and_vars</strong> – list of (gradient, variable)</p></li>
<li><p><strong>gradient_clip</strong> – value to clip</p></li>
<li><p><strong>gradient_l2_norm</strong> – gradient l2 norm used for the gradient clipping</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of (clipped gradient, variable)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>grads_and_vars</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.optimization_utils.filter_grads_for_vars">
<code class="sig-prename descclassname">nucleus7.utils.optimization_utils.</code><code class="sig-name descname">filter_grads_for_vars</code><span class="sig-paren">(</span><em class="sig-param">grads_and_vars</em>, <em class="sig-param">vars_to_filter</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/optimization_utils.html#filter_grads_for_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.optimization_utils.filter_grads_for_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Select only (gradient, variable) tuples, where variable belongs to
vars_to_filter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grads_and_vars</strong> – all the gradients and variables as list of (grad, var)</p></li>
<li><p><strong>vars_to_filter</strong> – variables to filter</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of (gradients, variable from vars_to_filter)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>grads_and_vars</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.optimization_utils.get_gradient_l2_norm">
<code class="sig-prename descclassname">nucleus7.utils.optimization_utils.</code><code class="sig-name descname">get_gradient_l2_norm</code><span class="sig-paren">(</span><em class="sig-param">gradients: Sequence[tensorflow.python.framework.ops.Tensor], name_of_name_scope: str = 'grad_l2_norm'</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.framework.ops.Tensor<a class="reference internal" href="../_modules/nucleus7/utils/optimization_utils.html#get_gradient_l2_norm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.optimization_utils.get_gradient_l2_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate l2 norm for of the gradients</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gradients</strong> – list of gradients</p></li>
<li><p><strong>name_of_name_scope</strong> – name of the name scope</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>l2 norm of the gradients</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>gradient_l2_norm</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.optimization_utils.sum_grads_with_vars">
<code class="sig-prename descclassname">nucleus7.utils.optimization_utils.</code><code class="sig-name descname">sum_grads_with_vars</code><span class="sig-paren">(</span><em class="sig-param">grads_and_vars_to_combine: List[List[Tuple[tensorflow.python.framework.ops.Tensor, tensorflow.python.ops.variables.VariableV1]]], use_mean: bool = False</em><span class="sig-paren">)</span> &#x2192; List[Tuple[tensorflow.python.framework.ops.Tensor, tensorflow.python.ops.variables.VariableV1]]<a class="reference internal" href="../_modules/nucleus7/utils/optimization_utils.html#sum_grads_with_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.optimization_utils.sum_grads_with_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Sum the gradients for same variables from list of of lists of
(gradient, variable)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grads_and_vars_to_combine</strong> – list of list of (gradient, variable) to combine</p></li>
<li><p><strong>use_mean</strong> – if the mean istead of sum should be used</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of (combined gradients, variable)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>grads_and_vars</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.optimization_utils.train_op_with_clip_and_noise">
<code class="sig-prename descclassname">nucleus7.utils.optimization_utils.</code><code class="sig-name descname">train_op_with_clip_and_noise</code><span class="sig-paren">(</span><em class="sig-param">optimizer: tensorflow.python.training.optimizer.Optimizer, grads_and_vars: List[Tuple[tensorflow.python.framework.ops.Tensor, tensorflow.python.ops.variables.VariableV1]], global_step: Optional[tensorflow.python.framework.ops.Tensor] = None, gradient_clip: Optional[float] = None, gradient_noise_std: Optional[float] = None, gradient_l2_norm: Optional[tensorflow.python.framework.ops.Tensor] = None</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.framework.ops.Operation<a class="reference internal" href="../_modules/nucleus7/utils/optimization_utils.html#train_op_with_clip_and_noise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.optimization_utils.train_op_with_clip_and_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce train op for gradients and variables with
gradient clip and adding of gradient noise if they were provided inside of
optim config</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>optimizer</strong> – optimizer to use</p></li>
<li><p><strong>grads_and_vars</strong> – list of (gradient, variable)</p></li>
<li><p><strong>global_step</strong> – global step to use in the optimizer; Caution: provide global_step only
once, if you execute this method multiple times in one session</p></li>
<li><p><strong>gradient_clip</strong> – gradient clip value</p></li>
<li><p><strong>gradient_noise_std</strong> – standard deviation of the noise to add to gradients</p></li>
<li><p><strong>gradient_l2_norm</strong> – gradient l2 norm used for the gradient clipping</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>training operation, which can be used inside of session run</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>train_op</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.project_utils">
<span id="nucleus7-utils-project-utils-module"></span><h2>nucleus7.utils.project_utils module<a class="headerlink" href="#module-nucleus7.utils.project_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to work with project</p>
<dl class="class">
<dt id="nucleus7.utils.project_utils.ProjectLock">
<em class="property">class </em><code class="sig-prename descclassname">nucleus7.utils.project_utils.</code><code class="sig-name descname">ProjectLock</code><span class="sig-paren">(</span><em class="sig-param">lock_dir: str</em>, <em class="sig-param">lockname: str = 'lockfile'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/project_utils.html#ProjectLock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.project_utils.ProjectLock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class to lock directory</p>
<p>Can be used to ensure that multiple processes will perform operations
sequentially.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lock_dir</strong> – path where to store lockfile</p></li>
<li><p><strong>lockname</strong> – file name of lock file</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="nucleus7.utils.project_utils.ProjectLock.lock_or_wait">
<code class="sig-name descname">lock_or_wait</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/project_utils.html#ProjectLock.lock_or_wait"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.project_utils.ProjectLock.lock_or_wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Create lock file if it does not exist or wait until lock file
is removed</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.project_utils.ProjectLock.release">
<code class="sig-name descname">release</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/project_utils.html#ProjectLock.release"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.project_utils.ProjectLock.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the lock file</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.project_utils.add_runtype_to_project_meta_info">
<code class="sig-prename descclassname">nucleus7.utils.project_utils.</code><code class="sig-name descname">add_runtype_to_project_meta_info</code><span class="sig-paren">(</span><em class="sig-param">project_dir: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/project_utils.html#add_runtype_to_project_meta_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.project_utils.add_runtype_to_project_meta_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Add current runtype to the project meta information json</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>project_dir</strong> – project directory</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.project_utils.collect_and_add_project_meta_info">
<code class="sig-prename descclassname">nucleus7.utils.project_utils.</code><code class="sig-name descname">collect_and_add_project_meta_info</code><span class="sig-paren">(</span><em class="sig-param">project_dir: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/project_utils.html#collect_and_add_project_meta_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.project_utils.collect_and_add_project_meta_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect the meta information of the project including run type, git hashes
of imported objects etc. and add it to existing meta information file inside
of project directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>project_dir</strong> – project directory</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.project_utils.collect_project_meta_info">
<code class="sig-prename descclassname">nucleus7.utils.project_utils.</code><code class="sig-name descname">collect_project_meta_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/project_utils.html#collect_project_meta_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.project_utils.collect_project_meta_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect the meta information of the project including run type, git hashes
of imported objects etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict holding meta information of the project for this run</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>project_meta</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.project_utils.get_project_name_from_directory">
<code class="sig-prename descclassname">nucleus7.utils.project_utils.</code><code class="sig-name descname">get_project_name_from_directory</code><span class="sig-paren">(</span><em class="sig-param">project_dir: str</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/project_utils.html#get_project_name_from_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.project_utils.get_project_name_from_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns project name given project directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>project_dir</strong> – project directory</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>project name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>project_name</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.project_utils.get_source_versions">
<code class="sig-prename descclassname">nucleus7.utils.project_utils.</code><code class="sig-name descname">get_source_versions</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/project_utils.html#get_source_versions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.project_utils.get_source_versions" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the source versions for all the modules used to construct
nucleus7 objects</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict with package names as keys and its version or git has as value</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>source_versions</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.project_utils.log_exported_model_info">
<code class="sig-prename descclassname">nucleus7.utils.project_utils.</code><code class="sig-name descname">log_exported_model_info</code><span class="sig-paren">(</span><em class="sig-param">path_to_log: str</em>, <em class="sig-param">global_step: int</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/project_utils.html#log_exported_model_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.project_utils.log_exported_model_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the exported model information to file “model.info”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_to_log</strong> – path to log directory to store the file</p></li>
<li><p><strong>global_step</strong> – global step of the export</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.project_utils.update_config_with_other_config">
<code class="sig-prename descclassname">nucleus7.utils.project_utils.</code><code class="sig-name descname">update_config_with_other_config</code><span class="sig-paren">(</span><em class="sig-param">config1: dict</em>, <em class="sig-param">config2: dict</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/project_utils.html#update_config_with_other_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.project_utils.update_config_with_other_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one config with other</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config1</strong> – base config, e.g. config that will be updated</p></li>
<li><p><strong>config2</strong> – config tha will update</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>updated config</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>updated_config</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.run_utils">
<span id="nucleus7-utils-run-utils-module"></span><h2>nucleus7.utils.run_utils module<a class="headerlink" href="#module-nucleus7.utils.run_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils for tensorflow run</p>
<dl class="function">
<dt id="nucleus7.utils.run_utils.get_cluster_spec">
<code class="sig-prename descclassname">nucleus7.utils.run_utils.</code><code class="sig-name descname">get_cluster_spec</code><span class="sig-paren">(</span><em class="sig-param">run_config: Optional[tensorflow_estimator.python.estimator.run_config.RunConfig] = None</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/run_utils.html#get_cluster_spec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.run_utils.get_cluster_spec" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns cluster spec from run_config</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>run_config</strong> – run config</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>cluster spec</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>cluster_spec</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.run_utils.get_run_type">
<code class="sig-prename descclassname">nucleus7.utils.run_utils.</code><code class="sig-name descname">get_run_type</code><span class="sig-paren">(</span><em class="sig-param">run_config: Optional[tensorflow_estimator.python.estimator.run_config.RunConfig] = None</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/run_utils.html#get_run_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.run_utils.get_run_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the estimator run_config type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>run_config</strong> – run config</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>type of run config in format {task_type}:{task_id}</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>run_config_type</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.run_utils.is_chief">
<code class="sig-prename descclassname">nucleus7.utils.run_utils.</code><code class="sig-name descname">is_chief</code><span class="sig-paren">(</span><em class="sig-param">run_config: Optional[tensorflow_estimator.python.estimator.run_config.RunConfig] = None</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="../_modules/nucleus7/utils/run_utils.html#is_chief"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.run_utils.is_chief" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if current run of estimator is a chief</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>run_config</strong> – run config</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if is chief run</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>flag</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.run_utils.is_evaluator_run">
<code class="sig-prename descclassname">nucleus7.utils.run_utils.</code><code class="sig-name descname">is_evaluator_run</code><span class="sig-paren">(</span><em class="sig-param">run_config: Optional[tensorflow_estimator.python.estimator.run_config.RunConfig] = None</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="../_modules/nucleus7/utils/run_utils.html#is_evaluator_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.run_utils.is_evaluator_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if current run of estimator is a evaluator run</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>run_config</strong> – run config</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if is evaluator run</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>flag</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.run_utils.is_local_run">
<code class="sig-prename descclassname">nucleus7.utils.run_utils.</code><code class="sig-name descname">is_local_run</code><span class="sig-paren">(</span><em class="sig-param">run_config: Optional[tensorflow_estimator.python.estimator.run_config.RunConfig] = None</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="../_modules/nucleus7/utils/run_utils.html#is_local_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.run_utils.is_local_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if current run of estimator is a local, e.g. not distributed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>run_config</strong> – run config</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if is local run</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>flag</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.run_utils.select_dataset_modes_for_run">
<code class="sig-prename descclassname">nucleus7.utils.run_utils.</code><code class="sig-name descname">select_dataset_modes_for_run</code><span class="sig-paren">(</span><em class="sig-param">run_config: Optional[tensorflow_estimator.python.estimator.run_config.RunConfig] = None</em><span class="sig-paren">)</span> &#x2192; list<a class="reference internal" href="../_modules/nucleus7/utils/run_utils.html#select_dataset_modes_for_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.run_utils.select_dataset_modes_for_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the dataset types for current estimator run</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>run_config</strong> – run config</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>[‘train’, ‘eval’] if is local run or [‘train’] for worker and chief
and [‘eval’] for evaluator</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list_of_dataset_modes</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.tensorrt_utils">
<span id="nucleus7-utils-tensorrt-utils-module"></span><h2>nucleus7.utils.tensorrt_utils module<a class="headerlink" href="#module-nucleus7.utils.tensorrt_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to use tensorrt</p>
<dl class="function">
<dt id="nucleus7.utils.tensorrt_utils.convert_saved_model_to_tensorrt">
<code class="sig-prename descclassname">nucleus7.utils.tensorrt_utils.</code><code class="sig-name descname">convert_saved_model_to_tensorrt</code><span class="sig-paren">(</span><em class="sig-param">saved_model_dir: str</em>, <em class="sig-param">tensorrt_config: nucleus7.coordinator.configs.TensorrtConfig = None</em>, <em class="sig-param">session_config: Optional[tensorflow.core.protobuf.config_pb2.ConfigProto] = None</em><span class="sig-paren">)</span> &#x2192; Tuple[Dict[str, tensorflow.python.framework.ops.Tensor], Dict[str, tensorflow.python.framework.ops.Tensor], tensorflow.core.framework.graph_pb2.GraphDef]<a class="reference internal" href="../_modules/nucleus7/utils/tensorrt_utils.html#convert_saved_model_to_tensorrt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tensorrt_utils.convert_saved_model_to_tensorrt" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert saved model to tensorrt.</p>
<p>Uses default tag and signature_def</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>saved_model_dir</strong> – directory with saved model inside</p></li>
<li><p><strong>tensorrt_config</strong> – tensorrt config which holds all the tensorrt parameters</p></li>
<li><p><strong>session_config</strong> – session config to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>input_tensors</em> – dict holding input tensors from saved model signature_def</p></li>
<li><p><em>output_tensors</em> – dict holding output tensors from saved model signature_def</p></li>
<li><p><em>trt_graph</em> – graph_def with tensorrt graph with variables</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if tensorrt import was unsuccessful</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.tf_collections_utils">
<span id="nucleus7-utils-tf-collections-utils-module"></span><h2>nucleus7.utils.tf_collections_utils module<a class="headerlink" href="#module-nucleus7.utils.tf_collections_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to work with tensorflow collections</p>
<dl class="function">
<dt id="nucleus7.utils.tf_collections_utils.add_level_to_collection_with_prefix">
<code class="sig-prename descclassname">nucleus7.utils.tf_collections_utils.</code><code class="sig-name descname">add_level_to_collection_with_prefix</code><span class="sig-paren">(</span><em class="sig-param">level_name: str</em>, <em class="sig-param">collection_prefix: str</em>, <em class="sig-param">graph: tensorflow.python.framework.ops.Graph = None</em>, <em class="sig-param">collection_separator: str = '::'</em>, <em class="sig-param">level_separator: str = '//'</em>, <em class="sig-param">collection_names_to_exclude: list = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_collections_utils.html#add_level_to_collection_with_prefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_collections_utils.add_level_to_collection_with_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Add new level before first level of collections under certain prefix</p>
<p>e.g.: ‘prefix::level1//level1’ -&gt; ‘prefix::level_name//level1//level2’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>level_name</strong> – level name to add to prefix</p></li>
<li><p><strong>collection_prefix</strong> – prefix of collections to rename</p></li>
<li><p><strong>graph</strong> – tensorflow graph</p></li>
<li><p><strong>collection_separator</strong> – separator of collections prefix</p></li>
<li><p><strong>level_separator</strong> – separator of the levels</p></li>
<li><p><strong>collection_names_to_exclude</strong> – collections to exclude from renaming</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_collections_utils.add_prefix_to_collection_with_prefix">
<code class="sig-prename descclassname">nucleus7.utils.tf_collections_utils.</code><code class="sig-name descname">add_prefix_to_collection_with_prefix</code><span class="sig-paren">(</span><em class="sig-param">level_prefix: str</em>, <em class="sig-param">collection_prefix: str</em>, <em class="sig-param">graph: Optional[tensorflow.python.framework.ops.Graph] = None</em>, <em class="sig-param">collection_separator: str = '::'</em>, <em class="sig-param">level_separator: str = '//'</em>, <em class="sig-param">prefix_separator: str = '_'</em>, <em class="sig-param">collection_names_to_leave: Optional[list] = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_collections_utils.html#add_prefix_to_collection_with_prefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_collections_utils.add_prefix_to_collection_with_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Add prefix to collection that already has a prefix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>level_prefix</strong> – prefix to add</p></li>
<li><p><strong>collection_prefix</strong> – prefix of the collection to add to</p></li>
<li><p><strong>graph</strong> – tensorflow graph</p></li>
<li><p><strong>collection_separator</strong> – name separator used inside of the collection</p></li>
<li><p><strong>level_separator</strong> – separator to use in new collections</p></li>
<li><p><strong>prefix_separator</strong> – separator to use to separate new prefix</p></li>
<li><p><strong>collection_names_to_leave</strong> – to this collections will not be added the level_prefix</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_collections_utils.collection2nested">
<code class="sig-prename descclassname">nucleus7.utils.tf_collections_utils.</code><code class="sig-name descname">collection2nested</code><span class="sig-paren">(</span><em class="sig-param">collection_prefix: str</em>, <em class="sig-param">separator: str = '::'</em>, <em class="sig-param">graph: Optional[tensorflow.python.framework.ops.Graph] = None</em>, <em class="sig-param">raise_error: bool = True</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/tf_collections_utils.html#collection2nested"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_collections_utils.collection2nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct the dict with keys as suffixes of collection
names and values as corresponding tensors / variables / ops
or list / value depending on the found collection_list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_prefix</strong> – prefix to collection name</p></li>
<li><p><strong>separator</strong> – separator to separate the suffix from key</p></li>
<li><p><strong>graph</strong> – graph to add the collections</p></li>
<li><p><strong>raise_error</strong> – if ValueError should be raised if no collections with defined prefix
were found</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict with values from collections</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict_with_values</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_collections_utils.get_collections_by_prefix">
<code class="sig-prename descclassname">nucleus7.utils.tf_collections_utils.</code><code class="sig-name descname">get_collections_by_prefix</code><span class="sig-paren">(</span><em class="sig-param">collection_prefix: str</em>, <em class="sig-param">separator: str = '::'</em>, <em class="sig-param">graph: tensorflow.python.framework.ops.Graph = None</em>, <em class="sig-param">raise_error: bool = True</em><span class="sig-paren">)</span> &#x2192; List[str]<a class="reference internal" href="../_modules/nucleus7/utils/tf_collections_utils.html#get_collections_by_prefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_collections_utils.get_collections_by_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of collection names if first split value of collection name
is <cite>collection_prefix</cite>. Collection names are split by <cite>separator</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_prefix</strong> – prefix to collection name</p></li>
<li><p><strong>separator</strong> – separator to separate the suffix from key</p></li>
<li><p><strong>graph</strong> – graph to add the collections</p></li>
<li><p><strong>raise_error</strong> – if ValueError should be raised if no collections with defined prefix
were found</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of full collection names</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>collection_list</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if there are no collections with that prefix (if <cite>raise_error==True</cite>)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_collections_utils.get_nucleotide_names_from_collections">
<code class="sig-prename descclassname">nucleus7.utils.tf_collections_utils.</code><code class="sig-name descname">get_nucleotide_names_from_collections</code><span class="sig-paren">(</span><em class="sig-param">graph: tensorflow.python.framework.ops.Graph</em>, <em class="sig-param">collection_list: list</em><span class="sig-paren">)</span> &#x2192; list<a class="reference internal" href="../_modules/nucleus7/utils/tf_collections_utils.html#get_nucleotide_names_from_collections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_collections_utils.get_nucleotide_names_from_collections" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all nucleotide names from graph collection list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> – tensorflow graph</p></li>
<li><p><strong>collection_list</strong> – list of collections to search</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of nucleotide names inside of collection_list</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list_of_nucleotide_names</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_collections_utils.nested2collection">
<code class="sig-prename descclassname">nucleus7.utils.tf_collections_utils.</code><code class="sig-name descname">nested2collection</code><span class="sig-paren">(</span><em class="sig-param">collection_prefix: str</em>, <em class="sig-param">values: dict</em>, <em class="sig-param">separator: str = '::'</em>, <em class="sig-param">graph: Optional[tensorflow.python.framework.ops.Graph] = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_collections_utils.html#nested2collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_collections_utils.nested2collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Add values from nested dict / list values to the collection with name
<cite>{collection_prefix}{separator}{key}</cite>
If the key starts with <cite>_</cite>, it will be ignored</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> – dict with str as keys and tensors / variables / ops as values</p></li>
<li><p><strong>collection_prefix</strong> – prefix to collection name</p></li>
<li><p><strong>separator</strong> – separator to separate the suffix from key</p></li>
<li><p><strong>graph</strong> – graph to add the collections</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if there are no collections with that prefix (if <cite>raise_error==True</cite>)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_collections_utils.remove_not_trainable_from_collection">
<code class="sig-prename descclassname">nucleus7.utils.tf_collections_utils.</code><code class="sig-name descname">remove_not_trainable_from_collection</code><span class="sig-paren">(</span><em class="sig-param">function: Callable</em><span class="sig-paren">)</span> &#x2192; Callable<a class="reference internal" href="../_modules/nucleus7/utils/tf_collections_utils.html#remove_not_trainable_from_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_collections_utils.remove_not_trainable_from_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to remove the variables from trainable collection if
self.trainable is False</p>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_collections_utils.remove_variables_from_collection">
<code class="sig-prename descclassname">nucleus7.utils.tf_collections_utils.</code><code class="sig-name descname">remove_variables_from_collection</code><span class="sig-paren">(</span><em class="sig-param">collection_name: str</em>, <em class="sig-param">variable_names_to_remove: list</em>, <em class="sig-param">graph: Optional[tensorflow.python.framework.ops.Graph] = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_collections_utils.html#remove_variables_from_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_collections_utils.remove_variables_from_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove variable from collection. Can be used to freeze some
variables by removing them from trainable collection</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> – name of collection</p></li>
<li><p><strong>variable_names_to_remove</strong> – list of variable names to remove from collection</p></li>
<li><p><strong>graph</strong> – if not provided, default graph will be used</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_collections_utils.rename_collection">
<code class="sig-prename descclassname">nucleus7.utils.tf_collections_utils.</code><code class="sig-name descname">rename_collection</code><span class="sig-paren">(</span><em class="sig-param">name_to_rename: str</em>, <em class="sig-param">new_name: str</em>, <em class="sig-param">graph: Optional[tensorflow.python.framework.ops.Graph] = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_collections_utils.html#rename_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_collections_utils.rename_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename collection</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name_to_rename</strong> – collection name to rename</p></li>
<li><p><strong>new_name</strong> – new collection name</p></li>
<li><p><strong>graph</strong> – tensorflow graph</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if collection with old_name is not found</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_collections_utils.rename_collections_with_prefix">
<code class="sig-prename descclassname">nucleus7.utils.tf_collections_utils.</code><code class="sig-name descname">rename_collections_with_prefix</code><span class="sig-paren">(</span><em class="sig-param">prefix_to_rename: str</em>, <em class="sig-param">new_prefix: str</em>, <em class="sig-param">graph: tensorflow.python.framework.ops.Graph = None</em>, <em class="sig-param">separator_to_rename: str = '::'</em>, <em class="sig-param">new_separator: str = '::'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_collections_utils.html#rename_collections_with_prefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_collections_utils.rename_collections_with_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Select collections according to prefix and rename that collections by
renaming the prefix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefix_to_rename</strong> – prefix to rename</p></li>
<li><p><strong>new_prefix</strong> – new prefix</p></li>
<li><p><strong>graph</strong> – tensorflow graph</p></li>
<li><p><strong>separator_to_rename</strong> – separator to use to separate the prefix</p></li>
<li><p><strong>new_separator</strong> – new prefix separator</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.tf_data_utils">
<span id="nucleus7-utils-tf-data-utils-module"></span><h2>nucleus7.utils.tf_data_utils module<a class="headerlink" href="#module-nucleus7.utils.tf_data_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to work with tensorflow data</p>
<dl class="class">
<dt id="nucleus7.utils.tf_data_utils.TfRecordsMixin">
<em class="property">class </em><code class="sig-prename descclassname">nucleus7.utils.tf_data_utils.</code><code class="sig-name descname">TfRecordsMixin</code><a class="reference internal" href="../_modules/nucleus7/utils/tf_data_utils.html#TfRecordsMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_data_utils.TfRecordsMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Mixin for tfrecords processing</p>
<dl class="method">
<dt id="nucleus7.utils.tf_data_utils.TfRecordsMixin.decode_field">
<code class="sig-name descname">decode_field</code><span class="sig-paren">(</span><em class="sig-param">field_name: str, field_value: Union[tensorflow.python.framework.ops.Tensor, tensorflow.python.framework.sparse_tensor.SparseTensor], field_type: Optional[tensorflow.python.framework.dtypes.DType] = None</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.framework.ops.Tensor<a class="reference internal" href="../_modules/nucleus7/utils/tf_data_utils.html#TfRecordsMixin.decode_field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_data_utils.TfRecordsMixin.decode_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Decode a field from a tfrecord example</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field_name</strong> – name of the field, if nested - will be separated using “/”</p></li>
<li><p><strong>field_value</strong> – value of the field from tfrecords example</p></li>
<li><p><strong>field_type</strong> – type of the decoded field from self.get_tfrecords_output_types
or None, if it was not provided</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.tf_data_utils.TfRecordsMixin.get_tfrecords_features">
<em class="property">abstract </em><code class="sig-name descname">get_tfrecords_features</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/tf_data_utils.html#TfRecordsMixin.get_tfrecords_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_data_utils.TfRecordsMixin.get_tfrecords_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dict, possibly nested, with feature names as keys and its
serialized type as values of type <code class="xref py py-obj docutils literal notranslate"><span class="pre">FixedLenFeature</span></code>.
Keys should not have any ‘/’, use nested dict instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>features inside of tfrecords file</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>features</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-meth docutils literal notranslate"><span class="pre">output_types()</span></code></dt><dd><p><code class="xref py py-func docutils literal notranslate"><span class="pre">tf.decode_raw()</span></code></p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.tf_data_utils.TfRecordsMixin.get_tfrecords_output_types">
<code class="sig-name descname">get_tfrecords_output_types</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional[dict]<a class="reference internal" href="../_modules/nucleus7/utils/tf_data_utils.html#TfRecordsMixin.get_tfrecords_output_types"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_data_utils.TfRecordsMixin.get_tfrecords_output_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dict, possibly nested, with tensor names and tensor types.
Keys should not have any ‘/’, use nested dict instead.</p>
<p>Should be same types which were used to store the tfrecord file</p>
<p>If not implemented, assumes that the types are defined already inside
of features, e.g. no decoding is needed</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>output types of tfrecords features</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>output_types</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-meth docutils literal notranslate"><span class="pre">output_types()</span></code></dt><dd><p><code class="xref py py-func docutils literal notranslate"><span class="pre">tf.parse_single_example()</span></code></p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.tf_data_utils.TfRecordsMixin.parse_tfrecord_example">
<code class="sig-name descname">parse_tfrecord_example</code><span class="sig-paren">(</span><em class="sig-param">example</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/tf_data_utils.html#TfRecordsMixin.parse_tfrecord_example"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_data_utils.TfRecordsMixin.parse_tfrecord_example" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse tfrecord example</p>
</dd></dl>

<dl class="method">
<dt id="nucleus7.utils.tf_data_utils.TfRecordsMixin.postprocess_tfrecords">
<code class="sig-name descname">postprocess_tfrecords</code><span class="sig-paren">(</span><em class="sig-param">**data</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/tf_data_utils.html#TfRecordsMixin.postprocess_tfrecords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_data_utils.TfRecordsMixin.postprocess_tfrecords" title="Permalink to this definition">¶</a></dt>
<dd><p>Postprocess tfrecords sample if needed.</p>
<p>This function is applied after sample is decoded from tfrecords file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**data</strong> – (nested) dict with raw tfrecords data</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>postprocessed data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>postprocessed_data</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_data_utils.combine_features_from_list_of_dict_datasets">
<code class="sig-prename descclassname">nucleus7.utils.tf_data_utils.</code><code class="sig-name descname">combine_features_from_list_of_dict_datasets</code><span class="sig-paren">(</span><em class="sig-param">list_of_datasets: List[tensorflow.python.data.ops.dataset_ops.DatasetV1]</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.data.ops.dataset_ops.DatasetV1<a class="reference internal" href="../_modules/nucleus7/utils/tf_data_utils.html#combine_features_from_list_of_dict_datasets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_data_utils.combine_features_from_list_of_dict_datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine the features from list_of_datasets to one dataset. Datasets will
be resolved in the order they are in the list, so if the ds1 has feature
with name ‘key1’ and ds2 has it, ds1[‘key1’] will be used</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>list_of_datasets</strong> – list of tf.data.Dataset instances to be combined</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dataset with all features</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dataset_with_all_features</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if features with same key from different datasets have different dtypes
    or shapes</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_data_utils.dense_to_sparse_feature">
<code class="sig-prename descclassname">nucleus7.utils.tf_data_utils.</code><code class="sig-name descname">dense_to_sparse_feature</code><span class="sig-paren">(</span><em class="sig-param">dense_feature: numpy.ndarray</em>, <em class="sig-param">feature_name: str</em>, <em class="sig-param">values_dtype=&lt;class 'numpy.float32'&gt;</em>, <em class="sig-param">sparse_value_as_zeroes=0</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/tf_data_utils.html#dense_to_sparse_feature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_data_utils.dense_to_sparse_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert dense feature to sparse one</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dense_feature</strong> – dense feature</p></li>
<li><p><strong>feature_name</strong> – name of the feature</p></li>
<li><p><strong>values_dtype</strong> – dtype of values inside of sparse tensor</p></li>
<li><p><strong>sparse_value_as_zeroes</strong> – value to use as a sparse</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict holding indices, values and shape of resulted sparse tensor</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sparse_feature_dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_data_utils.nested_to_tfrecords_feature">
<code class="sig-prename descclassname">nucleus7.utils.tf_data_utils.</code><code class="sig-name descname">nested_to_tfrecords_feature</code><span class="sig-paren">(</span><em class="sig-param">nested_values: dict</em>, <em class="sig-param">ignore_empty_arrays: bool = True</em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/nucleus7/utils/tf_data_utils.html#nested_to_tfrecords_feature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_data_utils.nested_to_tfrecords_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Create tf records features from nested dictionary structure</p>
<p>Structure will be first flatten with separator ‘/’ and then encoded
using corresponding feature type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nested_values</strong> – nested dict holding data</p></li>
<li><p><strong>ignore_empty_arrays</strong> – if the array is empty, e.g. it has 0 in the shape, it will not store
it; tfrecords parser raises
‘Invalid argument: Key: {key}. Can’t parse serialized Example’ on
empty arrays</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict with features from flatten elements of nested_values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>features</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.tf_objects_factory">
<span id="nucleus7-utils-tf-objects-factory-module"></span><h2>nucleus7.utils.tf_objects_factory module<a class="headerlink" href="#module-nucleus7.utils.tf_objects_factory" title="Permalink to this headline">¶</a></h2>
<p>Factories for tensorflow objects</p>
<dl class="function">
<dt id="nucleus7.utils.tf_objects_factory.activation_factory">
<code class="sig-prename descclassname">nucleus7.utils.tf_objects_factory.</code><code class="sig-name descname">activation_factory</code><span class="sig-paren">(</span><em class="sig-param">activation_or_name_with_params: Union[dict, str, type]</em><span class="sig-paren">)</span> &#x2192; Union[Callable[tensorflow.python.framework.ops.Tensor, tensorflow.python.framework.ops.Tensor], functools.partial]<a class="reference internal" href="../_modules/nucleus7/utils/tf_objects_factory.html#activation_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_objects_factory.activation_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory to get the activation function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>activation_or_name_with_params</strong> – either activation fn itself, then will be returned as is, or only the
name of activation, which will be get from tf.nn or from
keras.activations modules or a dict with name and kwargs to pass
to the activation_fn</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>activation function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>activation_fn</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_objects_factory.dropout_factory">
<code class="sig-prename descclassname">nucleus7.utils.tf_objects_factory.</code><code class="sig-name descname">dropout_factory</code><span class="sig-paren">(</span><em class="sig-param">dropout_or_name_with_params: Union[dict, str, Callable, None]</em><span class="sig-paren">)</span> &#x2192; Union[Callable[[tensorflow.python.framework.ops.Tensor, bool], tensorflow.python.framework.ops.Tensor], None, functools.partial]<a class="reference internal" href="../_modules/nucleus7/utils/tf_objects_factory.html#dropout_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_objects_factory.dropout_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory to get the dropout function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dropout_or_name_with_params</strong> – either dropout fn itself, then will be returned as is, or only the
name of dropout, e.g. normal or alpha, or a dict with name and kwargs
to pass to the dropout_fn, e.g. rate</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dropout function or None, if rate was not provided</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dropout_fn</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_objects_factory.initializer_factory">
<code class="sig-prename descclassname">nucleus7.utils.tf_objects_factory.</code><code class="sig-name descname">initializer_factory</code><span class="sig-paren">(</span><em class="sig-param">initializer_or_name_with_params</em><span class="sig-paren">)</span> &#x2192; Optional[tensorflow.python.ops.init_ops.Initializer]<a class="reference internal" href="../_modules/nucleus7/utils/tf_objects_factory.html#initializer_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_objects_factory.initializer_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory to construct keras initializer from its name or config</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>initializer_or_name_with_params</strong> – initilaizer itself, then returned as is, or the name of initializer
from keras.initializers namespace or config with name and params
to pass to constructor</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>initializer</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>initializer</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_objects_factory.learning_rate_decay_factory">
<code class="sig-prename descclassname">nucleus7.utils.tf_objects_factory.</code><code class="sig-name descname">learning_rate_decay_factory</code><span class="sig-paren">(</span><em class="sig-param">starter_learning_rate: float</em>, <em class="sig-param">global_step: tensorflow.python.framework.ops.Tensor</em>, <em class="sig-param">name: str = None</em>, <em class="sig-param">**decay_params</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.framework.ops.Tensor<a class="reference internal" href="../_modules/nucleus7/utils/tf_objects_factory.html#learning_rate_decay_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_objects_factory.learning_rate_decay_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory to construct the learning rate decay and apply it to learning rate</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>starter_learning_rate</strong> – initial learning rate</p></li>
<li><p><strong>global_step</strong> – global step</p></li>
<li><p><strong>name</strong> – name of the decay from tf.nn namespace excluding ‘_decay’ suffix, e.g.
for exponential_decay it should be exponential</p></li>
<li><p><strong>decay_params</strong> – parameters of the decay, which will be passed to decay function</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>learning_rate with decay or starter_learning_rate</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>learning_rate</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_objects_factory.optimizer_factory_from_name_and_parameters">
<code class="sig-prename descclassname">nucleus7.utils.tf_objects_factory.</code><code class="sig-name descname">optimizer_factory_from_name_and_parameters</code><span class="sig-paren">(</span><em class="sig-param">optimizer_name: str, learning_rate: Union[tensorflow.python.framework.ops.Tensor, float], **optimizer_parameters</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.training.optimizer.Optimizer<a class="reference internal" href="../_modules/nucleus7/utils/tf_objects_factory.html#optimizer_factory_from_name_and_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_objects_factory.optimizer_factory_from_name_and_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory to construct the optimizer from its name and config</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>optimizer_name</strong> – name of the optimizer</p></li>
<li><p><strong>learning_rate</strong> – learning rate to use</p></li>
<li><p><strong>optimizer_parameters</strong> – optimizer parameters, which will be passed to its constructor</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.tf_ops">
<span id="nucleus7-utils-tf-ops-module"></span><h2>nucleus7.utils.tf_ops module<a class="headerlink" href="#module-nucleus7.utils.tf_ops" title="Permalink to this headline">¶</a></h2>
<p>Tensorflow operations</p>
<dl class="function">
<dt id="nucleus7.utils.tf_ops.add_gradient_noise">
<code class="sig-prename descclassname">nucleus7.utils.tf_ops.</code><code class="sig-name descname">add_gradient_noise</code><span class="sig-paren">(</span><em class="sig-param">gradient</em>, <em class="sig-param">noise_stddev: float = 0.001</em>, <em class="sig-param">name: str = 'add_gradient_noise'</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.framework.ops.Tensor<a class="reference internal" href="../_modules/nucleus7/utils/tf_ops.html#add_gradient_noise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_ops.add_gradient_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Add random normal noise to gradient</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gradient</strong> – initial gradient to add the noise</p></li>
<li><p><strong>noise_stddev</strong> – standard deviation of the noise</p></li>
<li><p><strong>name</strong> – variable scope name to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>gradient with noise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>gradient_with_noise</p>
</dd>
</dl>
<p class="rubric">References</p>
<p><a class="reference external" href="http://arxiv.org/abs/1511.06807">http://arxiv.org/abs/1511.06807</a></p>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_ops.concat_or_stack">
<code class="sig-prename descclassname">nucleus7.utils.tf_ops.</code><code class="sig-name descname">concat_or_stack</code><span class="sig-paren">(</span><em class="sig-param">list_of_tensors: List[tensorflow.python.framework.ops.Tensor], axis: int = 0</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.framework.ops.Tensor<a class="reference internal" href="../_modules/nucleus7/utils/tf_ops.html#concat_or_stack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_ops.concat_or_stack" title="Permalink to this definition">¶</a></dt>
<dd><p>If rank of tensor is 0, then stacks it otherwise concatenates them</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_of_tensors</strong> – list of tensors</p></li>
<li><p><strong>axis</strong> – axis to concatenate</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>stacked or concatenated tensor</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>new_tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_ops.concat_padded">
<code class="sig-prename descclassname">nucleus7.utils.tf_ops.</code><code class="sig-name descname">concat_padded</code><span class="sig-paren">(</span><em class="sig-param">list_of_tensors: List[tensorflow.python.framework.ops.Tensor], axis: int = 0, expand_nonconcat_dim: bool = True</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.framework.ops.Tensor<a class="reference internal" href="../_modules/nucleus7/utils/tf_ops.html#concat_padded"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_ops.concat_padded" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenate tensors and pad tensors with smaller dimension.
Uses sparse concatenation inside, so can be slow</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_of_tensors</strong> – list of tensors</p></li>
<li><p><strong>axis</strong> – axis to concatenate</p></li>
<li><p><strong>expand_nonconcat_dim</strong> – whether to allow the expansion in the non-concat dimensions.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>concatenated tensor</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>concatenated_tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_ops.dense_to_sparse">
<code class="sig-prename descclassname">nucleus7.utils.tf_ops.</code><code class="sig-name descname">dense_to_sparse</code><span class="sig-paren">(</span><em class="sig-param">dense_tensor: tensorflow.python.framework.ops.Tensor</em>, <em class="sig-param">shape: list</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.framework.sparse_tensor.SparseTensor<a class="reference internal" href="../_modules/nucleus7/utils/tf_ops.html#dense_to_sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_ops.dense_to_sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert dense tensor to sparse one</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dense_tensor</strong> – dense tensor</p></li>
<li><p><strong>shape</strong> – shape of tensor</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>sparse tensor</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sparse_tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_ops.maybe_cast_dtype">
<code class="sig-prename descclassname">nucleus7.utils.tf_ops.</code><code class="sig-name descname">maybe_cast_dtype</code><span class="sig-paren">(</span><em class="sig-param">inputs: Dict[str, tensorflow.python.framework.ops.Tensor], cast_dtypes: Dict[tensorflow.python.framework.dtypes.DType, tensorflow.python.framework.dtypes.DType] = None</em><span class="sig-paren">)</span> &#x2192; Dict[str, tensorflow.python.framework.ops.Tensor]<a class="reference internal" href="../_modules/nucleus7/utils/tf_ops.html#maybe_cast_dtype"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_ops.maybe_cast_dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast values from nested inputs structure according to cast_dtypes mapping.
If dtype of value inside of inputs is not inside of cast_dtypes keys, it
will not be casted at all.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – possibly nested dict, with values as tensors</p></li>
<li><p><strong>cast_dtypes</strong> – dict with mapping of which dtype should be casted to which, e.g.
{float32: float16} means that all of float32 tensors will be casted
to float16 before passing to nucleotide</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>inputs_casted</strong> – same structure as inputs, but with inputs casted according to
cast_dtypes</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_ops.replace_nan_with_zeros">
<code class="sig-prename descclassname">nucleus7.utils.tf_ops.</code><code class="sig-name descname">replace_nan_with_zeros</code><span class="sig-paren">(</span><em class="sig-param">tensor: tensorflow.python.framework.ops.Tensor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_ops.html#replace_nan_with_zeros"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_ops.replace_nan_with_zeros" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace NaN inside of tensor with zeroes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tensor</strong> – tensor</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tensor with replaced NaNs</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tensor_without_nans</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_ops.split_with_pad">
<code class="sig-prename descclassname">nucleus7.utils.tf_ops.</code><code class="sig-name descname">split_with_pad</code><span class="sig-paren">(</span><em class="sig-param">tensor: tensorflow.python.framework.ops.Tensor</em>, <em class="sig-param">num_splits: int</em>, <em class="sig-param">axis=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_ops.html#split_with_pad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_ops.split_with_pad" title="Permalink to this definition">¶</a></dt>
<dd><p>Split the value to list of num_splits
and pad it with last value to make the value splittable by num_splits</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tensor</strong> – tensor to split</p></li>
<li><p><strong>num_splits</strong> – number of splits</p></li>
<li><p><strong>axis</strong> – axis to split</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tensor split with possible repeated last values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>split_tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_ops.squash_dims">
<code class="sig-prename descclassname">nucleus7.utils.tf_ops.</code><code class="sig-name descname">squash_dims</code><span class="sig-paren">(</span><em class="sig-param">tensor: tensorflow.python.framework.ops.Tensor</em>, <em class="sig-param">dims: list</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.framework.ops.Tensor<a class="reference internal" href="../_modules/nucleus7/utils/tf_ops.html#squash_dims"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_ops.squash_dims" title="Permalink to this definition">¶</a></dt>
<dd><p>Squash, e.g. combine, multiple dimensions from tensor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tensor</strong> – tensor to squash</p></li>
<li><p><strong>dims</strong> – dimensions to squash</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tensor with squashed dimensions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>squashed_tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_ops.stack_padded">
<code class="sig-prename descclassname">nucleus7.utils.tf_ops.</code><code class="sig-name descname">stack_padded</code><span class="sig-paren">(</span><em class="sig-param">list_of_tensors: List[tensorflow.python.framework.ops.Tensor], axis: int = 0, expand_nonconcat_dim: bool = True</em><span class="sig-paren">)</span> &#x2192; tensorflow.python.framework.ops.Tensor<a class="reference internal" href="../_modules/nucleus7/utils/tf_ops.html#stack_padded"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_ops.stack_padded" title="Permalink to this definition">¶</a></dt>
<dd><p>Stack tensors and pad tensors with smaller dimension.
Uses sparse concatenation inside, so can be slow</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_of_tensors</strong> – list of tensors</p></li>
<li><p><strong>axis</strong> – axis to concatenate</p></li>
<li><p><strong>expand_nonconcat_dim</strong> – whether to allow the expansion in the non-concat dimensions.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>stacked tensor</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>stacked_tensor</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.tf_utils">
<span id="nucleus7-utils-tf-utils-module"></span><h2>nucleus7.utils.tf_utils module<a class="headerlink" href="#module-nucleus7.utils.tf_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils for tensorflow</p>
<dl class="function">
<dt id="nucleus7.utils.tf_utils.add_variables_from_graph_without_collection">
<code class="sig-prename descclassname">nucleus7.utils.tf_utils.</code><code class="sig-name descname">add_variables_from_graph_without_collection</code><span class="sig-paren">(</span><em class="sig-param">graph: tensorflow.python.framework.ops.Graph = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_utils.html#add_variables_from_graph_without_collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_utils.add_variables_from_graph_without_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the variables to the GLOBAL_VARIABLES collection
if no variables there exist, e.g. no restoring of the model is possible
This may happen when you save the checkpoint, and seems to be a tensorflow
bug</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>graph</strong> – tensorflow graph</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_utils.combine_multiple_graphs_from_meta_and_checkpoint">
<code class="sig-prename descclassname">nucleus7.utils.tf_utils.</code><code class="sig-name descname">combine_multiple_graphs_from_meta_and_checkpoint</code><span class="sig-paren">(</span><em class="sig-param">meta_graph_paths: dict</em>, <em class="sig-param">checkpoint_paths: dict</em>, <em class="sig-param">save_dir: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_utils.html#combine_multiple_graphs_from_meta_and_checkpoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_utils.combine_multiple_graphs_from_meta_and_checkpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine multiple graphs and their checkpoints
Each graph will be imported under its variable_scope, so no collisions
of variables will happen</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>meta_graph_paths</strong> – dict with keys as names of the graphs and afterwards the variable scope
names where this graph is imported and values are paths to corresponding
graph.meta files</p></li>
<li><p><strong>checkpoint_paths</strong> – dict with same keys as meta_graph_paths and values pointing to the
corresponding checkpoints</p></li>
<li><p><strong>save_dir</strong> – directory where to save the combined graph</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_utils.count_trainable_params">
<code class="sig-prename descclassname">nucleus7.utils.tf_utils.</code><code class="sig-name descname">count_trainable_params</code><span class="sig-paren">(</span><em class="sig-param">graph: Optional[tensorflow.python.framework.ops.Graph] = None</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="../_modules/nucleus7/utils/tf_utils.html#count_trainable_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_utils.count_trainable_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Count number of trainable parameters inside of <cite>tf.trainable_variables</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>graph</strong> – tensorflow graph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of trainable parameters</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>number_of_parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_utils.figure_to_summary">
<code class="sig-prename descclassname">nucleus7.utils.tf_utils.</code><code class="sig-name descname">figure_to_summary</code><span class="sig-paren">(</span><em class="sig-param">fig: matplotlib.figure.Figure</em>, <em class="sig-param">vis_placeholder: tensorflow.python.framework.ops.Tensor</em>, <em class="sig-param">vis_summary: tensorflow.core.framework.summary_pb2.Summary</em>, <em class="sig-param">summary_writer: tensorflow.python.summary.writer.writer.FileWriter</em>, <em class="sig-param">global_step: tensorflow.python.framework.ops.Tensor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_utils.html#figure_to_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_utils.figure_to_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Write matplotlib figure to summary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fig</strong> – matplotlib figure</p></li>
<li><p><strong>vis_placeholder</strong> – placeholder to evaluate the summary</p></li>
<li><p><strong>vis_summary</strong> – summary to use</p></li>
<li><p><strong>summary_writer</strong> – summary writer</p></li>
<li><p><strong>global_step</strong> – global step</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_utils.filter_variables_by_pattern">
<code class="sig-prename descclassname">nucleus7.utils.tf_utils.</code><code class="sig-name descname">filter_variables_by_pattern</code><span class="sig-paren">(</span><em class="sig-param">variables: List[tensorflow.python.ops.variables.VariableV1], pattern: str, var_scope: Optional[str] = None</em><span class="sig-paren">)</span> &#x2192; List[tensorflow.python.ops.variables.VariableV1]<a class="reference internal" href="../_modules/nucleus7/utils/tf_utils.html#filter_variables_by_pattern"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_utils.filter_variables_by_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the variables which have pattern in the name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variables</strong> – list of variables</p></li>
<li><p><strong>pattern</strong> – pattern to look for</p></li>
<li><p><strong>var_scope</strong> – variable scope name to remove from variable name before matching</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>filtered variables</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>filtered_variables</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_utils.get_available_gpus">
<code class="sig-prename descclassname">nucleus7.utils.tf_utils.</code><code class="sig-name descname">get_available_gpus</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List[str]<a class="reference internal" href="../_modules/nucleus7/utils/tf_utils.html#get_available_gpus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_utils.get_available_gpus" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of available gpus</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>names of available gpus</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>gpu_names</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_utils.get_connected_inputs_to_predictions">
<code class="sig-prename descclassname">nucleus7.utils.tf_utils.</code><code class="sig-name descname">get_connected_inputs_to_predictions</code><span class="sig-paren">(</span><em class="sig-param">inputs: Dict[str, tensorflow.python.framework.ops.Tensor], predictions: Dict[str, tensorflow.python.framework.ops.Tensor], graph: tensorflow.python.framework.ops.Graph</em><span class="sig-paren">)</span> &#x2192; Dict[str, tensorflow.python.framework.ops.Tensor]<a class="reference internal" href="../_modules/nucleus7/utils/tf_utils.html#get_connected_inputs_to_predictions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_utils.get_connected_inputs_to_predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get inputs that have connections to predictions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – nested structure of inputs</p></li>
<li><p><strong>predictions</strong> – nested structure of predictions</p></li>
<li><p><strong>graph</strong> – instance of tensorflow graph with inputs and predictions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>same structure dict as inputs, but without values that have no
connection to predictions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>inputs_connected</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_utils.remove_tag_from_variable_name">
<code class="sig-prename descclassname">nucleus7.utils.tf_utils.</code><code class="sig-name descname">remove_tag_from_variable_name</code><span class="sig-paren">(</span><em class="sig-param">name: str</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/tf_utils.html#remove_tag_from_variable_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_utils.remove_tag_from_variable_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove variable tag from variable name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – variable name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>name without tag</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>name_without_tag</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">remove_tag_from_variable_name</span><span class="p">(</span><span class="s1">&#39;model/variable/name:1&#39;</span><span class="p">)</span>
<span class="go">&#39;model/variable/name&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">remove_tag_from_variable_name</span><span class="p">(</span><span class="s1">&#39;model/variable/name&#39;</span><span class="p">)</span>
<span class="go">&#39;model/variable/name&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_utils.replace_outputs_with_named_identity">
<code class="sig-prename descclassname">nucleus7.utils.tf_utils.</code><code class="sig-name descname">replace_outputs_with_named_identity</code><span class="sig-paren">(</span><em class="sig-param">function: Callable[..., Dict[str, Union[tensorflow.python.framework.ops.Tensor, Dict[str, tensorflow.python.framework.ops.Tensor]]]]</em><span class="sig-paren">)</span> &#x2192; Callable[..., Dict[str, Union[tensorflow.python.framework.ops.Tensor, Dict[str, tensorflow.python.framework.ops.Tensor]]]]<a class="reference internal" href="../_modules/nucleus7/utils/tf_utils.html#replace_outputs_with_named_identity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_utils.replace_outputs_with_named_identity" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces all the values inside of method outputs with identity tensor
applied on these values with name equal to key of the value in the
unflatten view, e.g. the name for value b inside {‘a’: {‘b’: 10}} will be
‘a//b’</p>
<p>If the value is not a tf.Tensor, it will be passed as is</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>decorated method</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>decorated_method</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_utils.save_input_output_node_names">
<code class="sig-prename descclassname">nucleus7.utils.tf_utils.</code><code class="sig-name descname">save_input_output_node_names</code><span class="sig-paren">(</span><em class="sig-param">path: str</em>, <em class="sig-param">inputs_collection_name: str</em>, <em class="sig-param">outputs_collection_names: str</em>, <em class="sig-param">parameter_placeholders=None</em>, <em class="sig-param">graph: tensorflow.python.framework.ops.Graph = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_utils.html#save_input_output_node_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_utils.save_input_output_node_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Save json file with input and output node names and its shapes</p>
<p>Resulted file has following format
{‘inputs’: {‘name’: , ‘shape’: }, ‘outputs’: {‘name’: , ‘shape’: }}</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – path to save</p></li>
<li><p><strong>inputs_collection_name</strong> – name of collection for inputs</p></li>
<li><p><strong>outputs_collection_names</strong> – name of collection for outputs</p></li>
<li><p><strong>parameter_placeholders</strong> – optional list of DefaultPlaceholderInfo specifying all the default
placeholders of the model</p></li>
<li><p><strong>graph</strong> – graph to retrieve inputs and outputs</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_utils.split_dict_to_list_of_dict">
<code class="sig-prename descclassname">nucleus7.utils.tf_utils.</code><code class="sig-name descname">split_dict_to_list_of_dict</code><span class="sig-paren">(</span><em class="sig-param">dict_with_tensors: Dict[str, tensorflow.python.framework.ops.Tensor], num_of_splits: int, axis=0, pad_to_batch=False</em><span class="sig-paren">)</span> &#x2192; List[Dict[str, tensorflow.python.framework.ops.Tensor]]<a class="reference internal" href="../_modules/nucleus7/utils/tf_utils.html#split_dict_to_list_of_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_utils.split_dict_to_list_of_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Split the dict of tensors to list of dicts with same structure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dict_with_tensors</strong> – dict with tensors</p></li>
<li><p><strong>num_of_splits</strong> – number of splits</p></li>
<li><p><strong>axis</strong> – axis to split the tensors</p></li>
<li><p><strong>pad_to_batch</strong> – whether to pad</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of split dicts</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list_of_dicts</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.tf_varscopes_utils">
<span id="nucleus7-utils-tf-varscopes-utils-module"></span><h2>nucleus7.utils.tf_varscopes_utils module<a class="headerlink" href="#module-nucleus7.utils.tf_varscopes_utils" title="Permalink to this headline">¶</a></h2>
<p>Utils to work with tensorflow variable scopes</p>
<dl class="function">
<dt id="nucleus7.utils.tf_varscopes_utils.add_var_scope_and_variables">
<code class="sig-prename descclassname">nucleus7.utils.tf_varscopes_utils.</code><code class="sig-name descname">add_var_scope_and_variables</code><span class="sig-paren">(</span><em class="sig-param">function: Callable</em><span class="sig-paren">)</span> &#x2192; Callable<a class="reference internal" href="../_modules/nucleus7/utils/tf_varscopes_utils.html#add_var_scope_and_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_varscopes_utils.add_var_scope_and_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to add variable scope and variables to self._variable_scope and
self._variables</p>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_varscopes_utils.get_var_scope_and_variables">
<code class="sig-prename descclassname">nucleus7.utils.tf_varscopes_utils.</code><code class="sig-name descname">get_var_scope_and_variables</code><span class="sig-paren">(</span><em class="sig-param">) -&gt; (&lt;class 'str'&gt;, typing.List[typing.Union[tensorflow.python.ops.variables.VariableV1, tensorflow.python.framework.ops.Tensor]]</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/tf_varscopes_utils.html#get_var_scope_and_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_varscopes_utils.get_var_scope_and_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Get variables inside of current variable scope</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>variable_scope</em> – name of current variable scope</p></li>
<li><p><em>variables</em> – list of tensorflow variables</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_varscopes_utils.remove_scope_from_name">
<code class="sig-prename descclassname">nucleus7.utils.tf_varscopes_utils.</code><code class="sig-name descname">remove_scope_from_name</code><span class="sig-paren">(</span><em class="sig-param">var_name: str</em>, <em class="sig-param">var_scope: str</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/nucleus7/utils/tf_varscopes_utils.html#remove_scope_from_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_varscopes_utils.remove_scope_from_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove variable scope from the variable name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var_name</strong> – name of the variable</p></li>
<li><p><strong>var_scope</strong> – name of the scope to remove</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>variable name without scope in it</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>variable_name_without_scope</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_varscopes_utils.with_name_scope">
<code class="sig-prename descclassname">nucleus7.utils.tf_varscopes_utils.</code><code class="sig-name descname">with_name_scope</code><span class="sig-paren">(</span><em class="sig-param">name: str</em><span class="sig-paren">)</span> &#x2192; Callable<a class="reference internal" href="../_modules/nucleus7/utils/tf_varscopes_utils.html#with_name_scope"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_varscopes_utils.with_name_scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to execute the decorated method under specific name scope</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – name of name_scope</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>decorated method</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>wrapper</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.tf_varscopes_utils.with_named_variable_scope">
<code class="sig-prename descclassname">nucleus7.utils.tf_varscopes_utils.</code><code class="sig-name descname">with_named_variable_scope</code><span class="sig-paren">(</span><em class="sig-param">function: Callable</em><span class="sig-paren">)</span> &#x2192; Callable<a class="reference internal" href="../_modules/nucleus7/utils/tf_varscopes_utils.html#with_named_variable_scope"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.tf_varscopes_utils.with_named_variable_scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorate the function to use the variable scope and if attribute
<cite>initializer</cite> exists in object, uses it as initializer of variable scope</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>function</strong> (<em>callable</em>) – function to decorate</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>decorated method</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>decorated_f</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.utils">
<span id="nucleus7-utils-utils-module"></span><h2>nucleus7.utils.utils module<a class="headerlink" href="#module-nucleus7.utils.utils" title="Permalink to this headline">¶</a></h2>
<p>General utils</p>
<dl class="function">
<dt id="nucleus7.utils.utils.float_or_string">
<code class="sig-prename descclassname">nucleus7.utils.utils.</code><code class="sig-name descname">float_or_string</code><span class="sig-paren">(</span><em class="sig-param">value: float</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/utils.html#float_or_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.utils.float_or_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Return float if possible and string otherwise</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">float_or_string</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">10.0</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">float_or_string</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="go">&#39;a&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.utils.get_is_last_sample_batchwise">
<code class="sig-prename descclassname">nucleus7.utils.utils.</code><code class="sig-name descname">get_is_last_sample_batchwise</code><span class="sig-paren">(</span><em class="sig-param">batch_size: int</em>, <em class="sig-param">is_last_iteration: bool</em>, <em class="sig-param">sample_mask: Union[list</em>, <em class="sig-param">numpy.ndarray</em>, <em class="sig-param">None] = None</em><span class="sig-paren">)</span> &#x2192; list<a class="reference internal" href="../_modules/nucleus7/utils/utils.html#get_is_last_sample_batchwise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.utils.get_is_last_sample_batchwise" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the is_last_sample from is_last_iteration and sample_mask for given
batch_size</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sample_mask</strong> – mask of samples</p></li>
<li><p><strong>is_last_iteration</strong> – if it is a last iteration; in that case, last valid item inside of
is_last_sample_batchwise will be set to 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list with 0 indicating that it is not last sample in iteration and 1
otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>is_last_sample_batchwise</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.utils.get_member_from_package_and_member_names">
<code class="sig-prename descclassname">nucleus7.utils.utils.</code><code class="sig-name descname">get_member_from_package_and_member_names</code><span class="sig-paren">(</span><em class="sig-param">class_name: str</em>, <em class="sig-param">package_name: str = None</em>, <em class="sig-param">default_package_names: list = None</em>, <em class="sig-param">default_class: type = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/utils.html#get_member_from_package_and_member_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.utils.get_member_from_package_and_member_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Import the class from list of packages (package_name+default_packages)
by class name; if class_name has ‘.’, it will be splitted to package_name
and class_name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>class_name</strong> – name of the class</p></li>
<li><p><strong>package_name</strong> – name of the package</p></li>
<li><p><strong>default_package_names</strong> – list of packages to look if the class was not found with package_name</p></li>
<li><p><strong>default_class</strong> – if class was not found - this class will be returned</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>class from class_name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>class</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.utils.int_or_string">
<code class="sig-prename descclassname">nucleus7.utils.utils.</code><code class="sig-name descname">int_or_string</code><span class="sig-paren">(</span><em class="sig-param">value: int</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/utils.html#int_or_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.utils.int_or_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Return int if possible and string otherwise</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">int_or_string</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">int_or_string</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="go">&#39;a&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.utils.maybe_update_undefined_parameter_in_config">
<code class="sig-prename descclassname">nucleus7.utils.utils.</code><code class="sig-name descname">maybe_update_undefined_parameter_in_config</code><span class="sig-paren">(</span><em class="sig-param">config: NamedTuple</em>, <em class="sig-param">param_name: str</em>, <em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/utils.html#maybe_update_undefined_parameter_in_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.utils.maybe_update_undefined_parameter_in_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the parameter if it is None with value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – config to update</p></li>
<li><p><strong>param_name</strong> – name of the parameter to update</p></li>
<li><p><strong>value</strong> – value to use if the config.param_name is None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>config with updated parameter</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>config</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Config</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maybe_update_undefined_parameter_in_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="go">Config(10, 20)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maybe_update_undefined_parameter_in_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="go">Config(100, 20)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.utils.replace_sets_to_lists">
<code class="sig-prename descclassname">nucleus7.utils.utils.</code><code class="sig-name descname">replace_sets_to_lists</code><span class="sig-paren">(</span><em class="sig-param">nested_dict: dict</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/utils.html#replace_sets_to_lists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.utils.replace_sets_to_lists" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively replace the sets as values to lists inside of nested_dict</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="mi">123</span><span class="p">,</span> <span class="mi">456</span><span class="p">}}}</span>
<span class="go">{&#39;a&#39;: [1, 2, 3], &#39;b&#39;: 1, &#39;c&#39;: {1: [123, 456]}}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nested_dict</strong> – dict with sets inside as values</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.utils.split_batch_inputs">
<code class="sig-prename descclassname">nucleus7.utils.utils.</code><code class="sig-name descname">split_batch_inputs</code><span class="sig-paren">(</span><em class="sig-param">inputs: dict</em>, <em class="sig-param">not_batch_keys: Optional[List[str]] = None</em>, <em class="sig-param">ignore_none_values=True</em><span class="sig-paren">)</span> &#x2192; Tuple[List[dict], dict]<a class="reference internal" href="../_modules/nucleus7/utils/utils.html#split_batch_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.utils.split_batch_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Split batch inputs to sample inputs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – batch inputs to split</p></li>
<li><p><strong>not_batch_keys</strong> – keys to exclude from split</p></li>
<li><p><strong>ignore_none_values</strong> – if the keys with None values should be treated as not batch keys</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>batch_inputs_flat_as_list</em> – list split batch inputs</p></li>
<li><p><em>not_batch_inputs</em> – dict with not batch inputs</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.utils.string_to_int_code">
<code class="sig-prename descclassname">nucleus7.utils.utils.</code><code class="sig-name descname">string_to_int_code</code><span class="sig-paren">(</span><em class="sig-param">string: str</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="../_modules/nucleus7/utils/utils.html#string_to_int_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.utils.string_to_int_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the string to an integer code representation.</p>
<p>Can be used for a random seed generation from a string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>string</strong> – string to convert</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>integer representation of the string</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int_code</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.vis_utils">
<span id="nucleus7-utils-vis-utils-module"></span><h2>nucleus7.utils.vis_utils module<a class="headerlink" href="#module-nucleus7.utils.vis_utils" title="Permalink to this headline">¶</a></h2>
<p>Tools for visualization of model DNA</p>
<dl class="function">
<dt id="nucleus7.utils.vis_utils.draw_dna_connections">
<code class="sig-prename descclassname">nucleus7.utils.vis_utils.</code><code class="sig-name descname">draw_dna_connections</code><span class="sig-paren">(</span><em class="sig-param">dna_helix_graph: networkx.classes.digraph.DiGraph, nucleotide_plots: Dict[nucleus7.core.nucleotide.Nucleotide, nucleus7.utils.vis_utils.NUCLEOTIDE_PLOT], subplot: matplotlib.axes._subplots.AxesSubplot, verbosity: int = 0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/vis_utils.html#draw_dna_connections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.vis_utils.draw_dna_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw dna connections on given subplot according to verbosity level</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dna_helix_graph</strong> – directed graph with nucleotides as nodes</p></li>
<li><p><strong>nucleotide_plots</strong> – mapping of nucleotide to its plot</p></li>
<li><p><strong>subplot</strong> – subplot to draw on</p></li>
<li><p><strong>verbosity</strong> – verbosity of the visualization;
if verbosity == 0, then only the connections between
nucleotide are drawn, otherwise connections between nucleotide keys
are drawn</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.vis_utils.draw_dna_helix">
<code class="sig-prename descclassname">nucleus7.utils.vis_utils.</code><code class="sig-name descname">draw_dna_helix</code><span class="sig-paren">(</span><em class="sig-param">dna_helix_graph: networkx.classes.digraph.DiGraph</em>, <em class="sig-param">*</em>, <em class="sig-param">title_prefix: str = ''</em>, <em class="sig-param">title_suffix: str = ''</em>, <em class="sig-param">figsize=(14</em>, <em class="sig-param">14)</em>, <em class="sig-param">verbosity: int = 0</em><span class="sig-paren">)</span> &#x2192; matplotlib.axes._subplots.AxesSubplot<a class="reference internal" href="../_modules/nucleus7/utils/vis_utils.html#draw_dna_helix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.vis_utils.draw_dna_helix" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw interactive dna helix</p>
<p>All nucleotides bodies are clickable; also the font is automatic rescalable
to fit it to the circles / wedges.</p>
<p>By single click on nucleotide, the nucleotide description pops up on the
right side of image.</p>
<p>By double click on nucleotide, new figure is opened and subgraph with all
connections of this nucleotide is drawn in same fashion with verbosity=2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dna_helix_graph</strong> – directed graph with nucleotides as nodes</p></li>
<li><p><strong>title_prefix</strong> – prefix that will be added to the plot title</p></li>
<li><p><strong>title_suffix</strong> – suffix that will be added to the plot title</p></li>
<li><p><strong>figsize</strong> – size of figure</p></li>
<li><p><strong>verbosity</strong> – verbosity of the visualization;
if verbosity == 0, then only the connections between
nucleotide are drawn, otherwise connections between nucleotide keys
are drawn</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>axes subplot with drawn dna helix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>subplot</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if verbosity not in [0, 1]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.vis_utils.draw_dna_helix_on_subplot">
<code class="sig-prename descclassname">nucleus7.utils.vis_utils.</code><code class="sig-name descname">draw_dna_helix_on_subplot</code><span class="sig-paren">(</span><em class="sig-param">dna_helix_graph</em>, <em class="sig-param">subplot</em>, <em class="sig-param">radius: int = 10</em>, <em class="sig-param">verbosity: int = 0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nucleus7/utils/vis_utils.html#draw_dna_helix_on_subplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.vis_utils.draw_dna_helix_on_subplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the dna helix on given subplot according to verbosity</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dna_helix_graph</strong> – directed graph with nucleotides as nodes</p></li>
<li><p><strong>subplot</strong> – axes subplot to draw on</p></li>
<li><p><strong>radius</strong> – radius of nucleotide to draw</p></li>
<li><p><strong>verbosity</strong> – verbosity of the visualization;
if verbosity == 0, then only the connections between
nucleotide are drawn, otherwise connections between nucleotide keys
are drawn</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.vis_utils.draw_nucleotide">
<code class="sig-prename descclassname">nucleus7.utils.vis_utils.</code><code class="sig-name descname">draw_nucleotide</code><span class="sig-paren">(</span><em class="sig-param">nucleotide: nucleus7.core.nucleotide.Nucleotide</em>, <em class="sig-param">center: Optional[Sequence[float]] = (0</em>, <em class="sig-param">0)</em>, <em class="sig-param">subplot: Optional[matplotlib.axes._subplots.AxesSubplot] = None</em>, <em class="sig-param">radius: float = 10.0</em><span class="sig-paren">)</span> &#x2192; nucleus7.utils.vis_utils.NUCLEOTIDE_PLOT<a class="reference internal" href="../_modules/nucleus7/utils/vis_utils.html#draw_nucleotide"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.vis_utils.draw_nucleotide" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw nucleotide with its keys</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nucleotide</strong> – directed graph with nucleotides as nodes</p></li>
<li><p><strong>center</strong> – center of nucleotide on the plot</p></li>
<li><p><strong>subplot</strong> – subplot to use</p></li>
<li><p><strong>radius</strong> – radius of nucleotide to draw</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>named tuple holding all the drawn patches for nucleotide body and
it’s keys</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nucleotide_plot</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils.warnings">
<span id="nucleus7-utils-warnings-module"></span><h2>nucleus7.utils.warnings module<a class="headerlink" href="#module-nucleus7.utils.warnings" title="Permalink to this headline">¶</a></h2>
<p>nucleus7 specific warnings</p>
<dl class="exception">
<dt id="nucleus7.utils.warnings.RegisterWarning">
<em class="property">exception </em><code class="sig-prename descclassname">nucleus7.utils.warnings.</code><code class="sig-name descname">RegisterWarning</code><a class="reference internal" href="../_modules/nucleus7/utils/warnings.html#RegisterWarning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.warnings.RegisterWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#UserWarning" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserWarning</span></code></a></p>
<p>Warning used to warn about the register issues</p>
</dd></dl>

<dl class="function">
<dt id="nucleus7.utils.warnings.suppress_warnings">
<code class="sig-prename descclassname">nucleus7.utils.warnings.</code><code class="sig-name descname">suppress_warnings</code><span class="sig-paren">(</span><em class="sig-param">warning_category: Warning = &lt;class 'nucleus7.utils.warnings.RegisterWarning'&gt;</em><span class="sig-paren">)</span> &#x2192; Callable<a class="reference internal" href="../_modules/nucleus7/utils/warnings.html#suppress_warnings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nucleus7.utils.warnings.suppress_warnings" title="Permalink to this definition">¶</a></dt>
<dd><p>Suppresses warnings inside of the decorated method</p>
</dd></dl>

</div>
<div class="section" id="module-nucleus7.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-nucleus7.utils" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="nucleus7.third_party.html" class="btn btn-neutral float-left" title="nucleus7.third_party package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Audi Electronics Venture GmbH

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>